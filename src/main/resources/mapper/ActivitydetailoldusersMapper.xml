<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dao.ActivitydetailoldusersMapper">
	<!--参与记录 -->
	<resultMap type="com.bean.Activitydetailoldusers" id="activityIndo">
		<id column="singId" property="id" />
		<result column="uid" property="uid" />
		<result column="singtime" property="singtime" />
		<result column="activityid" property="activityid" />
		<association property="activitydetailinfo" javaType="com.bean.Activitydetailinfo">
			<id column="id" property="id" />
			<result column="activitytitle" property="activitytitle" />
			<result column="activitycontent" property="activitycontent" />
			<result column="activityteacher" property="activityteacher" />
			<result column="activitystarttime" property="activitystarttime" />
			<result column="actitvityendtime" property="actitvityendtime" />
			<result column="activityprice" property="activityprice" />
			<result column="activitylocation" property="activitylocation" />
			<result column="activitystoptime" property="activitystoptime" />
			<result column="mid" property="mid" />
		</association>
	</resultMap>
	<!--后台查看用户参与情况 -->
	<resultMap type="com.bean.Activitydetailoldusers" id="activityjoinuser">
		<id column="id" property="id" />
		<result column="uid" property="uid" />
		<result column="singtime" property="singtime" />
		<result column="activityid" property="activityid" />
		<association property="activitydetailinfo" javaType="com.bean.Activitydetailinfo">
			<id column="activityid" property="id" />
			<result column="activitytitle" property="activitytitle" />
			<result column="activitycontent" property="activitycontent" />
			<result column="activityteacher" property="activityteacher" />
			<result column="activitystarttime" property="activitystarttime" />
			<result column="actitvityendtime" property="actitvityendtime" />
			<result column="activityprice" property="activityprice" />
			<result column="activitylocation" property="activitylocation" />
			<result column="activitystoptime" property="activitystoptime" />
			<result column="mid" property="mid" />
		</association>
	</resultMap>
	<resultMap id="BaseResultMap" type="com.bean.Activitydetailoldusers">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<constructor>
			<idArg column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="uid" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="singtime" jdbcType="DATE" javaType="java.util.Date" />
			<arg column="activityid" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="extended1" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended2" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended3" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended4" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended5" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended6" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended7" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended8" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended9" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended10" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended11" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended12" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended13" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended14" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended15" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended16" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended17" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended18" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended19" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended20" jdbcType="VARCHAR" javaType="java.lang.String" />
		</constructor>
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		id, uid, singtime, activityid, extended1, extended2, extended3,
		extended4, extended5,
		extended6, extended7, extended8, extended9,
		extended10, extended11, extended12,
		extended13,
		extended14, extended15,
		extended16, extended17, extended18, extended19,
		extended20
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<include refid="Base_Column_List" />
		from activitydetailoldusers
		where id = #{id,jdbcType=INTEGER}
	</select>
	<!--用户查看参与记录 -->
	<select id="findMyJoninActivies" parameterType="hashMap"
		resultMap="activityIndo">
		select activitydetailinfo.id,activitytitle,activitycontent,
		activityteacher,activitystarttime,actitvityendtime,COALESCE(activityprice,0),activitylocation,
		activitystoptime,mid,
		activitydetailoldusers.id
		singId,uid,singtime,activityid from
		activitydetailoldusers,activitydetailinfo
		where
		activitydetailinfo.id=activitydetailoldusers.activityid
		AND uid=#{uid}
		ORDER BY id LIMIT #{page},#{max}
	</select>
	<!--某用户参与的记录数 -->
	<select id="getMyJoinActivityCount" parameterType="java.lang.String"
		resultType="java.lang.Integer">
		select count(*) from activitydetailoldusers where
		uid=#{uid,jdbcType=VARCHAR}
	</select>
	<!--是否参加该活动 -->
	<select id="queryWhetherJoinActivity" parameterType="hashMap"
		resultMap="BaseResultMap">
		SELECT * from activitydetailoldusers WHERE
		activityid=#{id,jdbcType=INTEGER}
		AND uid=#{userid,jdbcType=VARCHAR}
	</select>
	<!--后台查看所有的参与人员 -->
	<select id="findJoinActiviyUsers" parameterType="hashMap"
		resultMap="activityjoinuser">
		SELECT
		activitydetailoldusers.*,manager.locaid,activitydetailinfo.id
		activityid
		,activitydetailinfo.activitytitle,activitydetailinfo.activitystarttime
		,activitydetailinfo.actitvityendtime ,
		activitydetailinfo.activitystoptime
		FROM activitydetailoldusers
		,old_users ,manager,activitydetailinfo
		WHERE
		manager.locaid=old_users.area
		AND activitydetailoldusers.uid
		=old_users.uid
		AND
		activitydetailinfo.id=activitydetailoldusers.activityid
		AND
		manager.locaid=#{localareaid,jdbcType=INTEGER}
		GROUP BY activitydetailinfo.id 
		ORDER BY
		activitydetailoldusers.id LIMIT #{page},#{max}
	</select>
	<!--查询某一活动的用户参与情况 -->
	<select id="findOneActivityJoinUserDetails" parameterType="hashMap"
		resultMap="activityjoinuser">
		SELECT activitydetailoldusers.*,manager.locaid,activitydetailinfo.id
		activityid
		,activitydetailinfo.activitytitle,activitydetailinfo.activitystarttime
		,activitydetailinfo.actitvityendtime ,
		activitydetailinfo.activitystoptime
		FROM activitydetailoldusers
		,old_users ,manager,activitydetailinfo
		WHERE
		manager.locaid=old_users.area
		AND activitydetailoldusers.uid
		=old_users.uid
		AND
		activitydetailinfo.id=activitydetailoldusers.activityid
		AND
		manager.locaid=#{localareaid,jdbcType=INTEGER}
		AND activitydetailinfo.id=#{activityid,jdbcType=INTEGER}
		ORDER BY activitydetailoldusers.id LIMIT
		#{page},#{max}
	</select>
	<!--某地区的活动的参与人数 -->
	<select id="getAllJoinActivityCount" parameterType="java.lang.Integer"
		resultType="java.lang.Integer">
		select count(*) from activitydetailoldusers ,old_users
		,manager,activitydetailinfo
		WHERE manager.locaid=old_users.area
		AND
		activitydetailoldusers.uid =old_users.uid
		AND
		activitydetailinfo.id=activitydetailoldusers.activityid
		AND
		manager.locaid=#{locaid,jdbcType=INTEGER}
	</select>
	<!--一个活动的参与人数 -->
	<select id="oneActivityJoinUserCount" parameterType="java.lang.Integer"
		resultType="java.lang.Integer">
		select count(*) from activitydetailoldusers where activityid=#{activityid}
	</select>
	<!--删除参与记录 -->
	<delete id="deleteMyJoninActivies" parameterType="java.lang.String">
		delete * from
		activitydetailoldusers where uid=#{uid,jdbcType=VARCHAR}
	</delete>
	<!-- 根据活动id删除该活动的所有用户报名记录 -->
	<delete id="deleteByActiviyId" parameterType="java.lang.Integer"> 
	DELETE from activitydetailoldusers WHERE activityid=#{activityid}
	</delete>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from activitydetailoldusers
		where id = #{id,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.bean.Activitydetailoldusers">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into activitydetailoldusers (id, uid, singtime,
		activityid,
		extended1, extended2,
		extended3, extended4, extended5,
		extended6,
		extended7, extended8,
		extended9, extended10, extended11,
		extended12,
		extended13, extended14,
		extended15, extended16, extended17,
		extended18,
		extended19, extended20
		)
		values (#{id,jdbcType=INTEGER},
		#{uid,jdbcType=VARCHAR},
		#{singtime,jdbcType=DATE},
		#{activityid,jdbcType=INTEGER}, #{extended1,jdbcType=VARCHAR},
		#{extended2,jdbcType=VARCHAR},
		#{extended3,jdbcType=VARCHAR},
		#{extended4,jdbcType=VARCHAR},
		#{extended5,jdbcType=VARCHAR},
		#{extended6,jdbcType=VARCHAR}, #{extended7,jdbcType=VARCHAR},
		#{extended8,jdbcType=VARCHAR},
		#{extended9,jdbcType=VARCHAR},
		#{extended10,jdbcType=VARCHAR},
		#{extended11,jdbcType=VARCHAR},
		#{extended12,jdbcType=VARCHAR}, #{extended13,jdbcType=VARCHAR},
		#{extended14,jdbcType=VARCHAR},
		#{extended15,jdbcType=VARCHAR},
		#{extended16,jdbcType=VARCHAR},
		#{extended17,jdbcType=VARCHAR},
		#{extended18,jdbcType=VARCHAR}, #{extended19,jdbcType=VARCHAR},
		#{extended20,jdbcType=VARCHAR}
		)
	</insert>
	<insert id="insertSelective" parameterType="com.bean.Activitydetailoldusers">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into activitydetailoldusers
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="uid != null">
				uid,
			</if>
			<if test="singtime != null">
				singtime,
			</if>
			<if test="activityid != null">
				activityid,
			</if>
			<if test="extended1 != null">
				extended1,
			</if>
			<if test="extended2 != null">
				extended2,
			</if>
			<if test="extended3 != null">
				extended3,
			</if>
			<if test="extended4 != null">
				extended4,
			</if>
			<if test="extended5 != null">
				extended5,
			</if>
			<if test="extended6 != null">
				extended6,
			</if>
			<if test="extended7 != null">
				extended7,
			</if>
			<if test="extended8 != null">
				extended8,
			</if>
			<if test="extended9 != null">
				extended9,
			</if>
			<if test="extended10 != null">
				extended10,
			</if>
			<if test="extended11 != null">
				extended11,
			</if>
			<if test="extended12 != null">
				extended12,
			</if>
			<if test="extended13 != null">
				extended13,
			</if>
			<if test="extended14 != null">
				extended14,
			</if>
			<if test="extended15 != null">
				extended15,
			</if>
			<if test="extended16 != null">
				extended16,
			</if>
			<if test="extended17 != null">
				extended17,
			</if>
			<if test="extended18 != null">
				extended18,
			</if>
			<if test="extended19 != null">
				extended19,
			</if>
			<if test="extended20 != null">
				extended20,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="uid != null">
				#{uid,jdbcType=VARCHAR},
			</if>
			<if test="singtime != null">
				#{singtime,jdbcType=DATE},
			</if>
			<if test="activityid != null">
				#{activityid,jdbcType=INTEGER},
			</if>
			<if test="extended1 != null">
				#{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				#{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				#{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				#{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				#{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				#{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				#{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				#{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				#{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				#{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				#{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				#{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				#{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				#{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				#{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				#{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				#{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				#{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				#{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				#{extended20,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.bean.Activitydetailoldusers">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update activitydetailoldusers
		<set>
			<if test="uid != null">
				uid = #{uid,jdbcType=VARCHAR},
			</if>
			<if test="singtime != null">
				singtime = #{singtime,jdbcType=DATE},
			</if>
			<if test="activityid != null">
				activityid = #{activityid,jdbcType=INTEGER},
			</if>
			<if test="extended1 != null">
				extended1 = #{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				extended2 = #{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				extended3 = #{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				extended4 = #{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				extended5 = #{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				extended6 = #{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				extended7 = #{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				extended8 = #{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				extended9 = #{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				extended10 = #{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				extended11 = #{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				extended12 = #{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				extended13 = #{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				extended14 = #{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				extended15 = #{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				extended16 = #{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				extended17 = #{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				extended18 = #{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				extended19 = #{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				extended20 = #{extended20,jdbcType=VARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.bean.Activitydetailoldusers">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update activitydetailoldusers
		set uid = #{uid,jdbcType=VARCHAR},
		singtime = #{singtime,jdbcType=DATE},
		activityid =
		#{activityid,jdbcType=INTEGER},
		extended1 =
		#{extended1,jdbcType=VARCHAR},
		extended2 =
		#{extended2,jdbcType=VARCHAR},
		extended3 =
		#{extended3,jdbcType=VARCHAR},
		extended4 =
		#{extended4,jdbcType=VARCHAR},
		extended5 =
		#{extended5,jdbcType=VARCHAR},
		extended6 =
		#{extended6,jdbcType=VARCHAR},
		extended7 =
		#{extended7,jdbcType=VARCHAR},
		extended8 =
		#{extended8,jdbcType=VARCHAR},
		extended9 =
		#{extended9,jdbcType=VARCHAR},
		extended10 =
		#{extended10,jdbcType=VARCHAR},
		extended11 =
		#{extended11,jdbcType=VARCHAR},
		extended12 =
		#{extended12,jdbcType=VARCHAR},
		extended13 =
		#{extended13,jdbcType=VARCHAR},
		extended14 =
		#{extended14,jdbcType=VARCHAR},
		extended15 =
		#{extended15,jdbcType=VARCHAR},
		extended16 =
		#{extended16,jdbcType=VARCHAR},
		extended17 =
		#{extended17,jdbcType=VARCHAR},
		extended18 =
		#{extended18,jdbcType=VARCHAR},
		extended19 =
		#{extended19,jdbcType=VARCHAR},
		extended20 =
		#{extended20,jdbcType=VARCHAR}
		where id = #{id,jdbcType=INTEGER}
	</update>
</mapper>