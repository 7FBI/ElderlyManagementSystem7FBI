<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dao.MatchdiseaseMapper">
	<!--前台病历 -->
	<resultMap type="com.bean.OldSickness" id="diseaseDetails">
		<id column="sicknessId" property="id" />
		<result column="detailid" property="detailid" />
		<result column="did" property="did" />
		<association property="diseaselibrary" javaType="com.bean.OldDiseaselibrary">
			<id column="diseaselibraryId" property="id" />
			<result column="description" property="description" />
			<result column="diseasename" property="diseasename" />
			<result column="alias" property="alias" />
		</association>
		<association property="oldDiseasedetails" javaType="com.bean.OldDiseasedetails">
			<id column="id" property="id" />
			<result column="uid" property="uid" />
			<result column="treat_tiem" property="treatTiem" />
			<result column="suggest" property="suggest" />
			<result column="history" property="history" />
		</association>
	</resultMap>
	
	<resultMap id="BaseResultMap" type="com.bean.Matchdisease">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<constructor>
			<idArg column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="pid" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="did" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="extended1" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended2" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended3" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended4" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended5" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended6" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended7" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended8" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended9" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended10" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended11" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended12" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended13" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended14" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended15" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended16" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended17" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended18" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended19" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended20" jdbcType="VARCHAR" javaType="java.lang.String" />
		</constructor>
	</resultMap>
	<resultMap type="com.bean.Matchdisease" id="ProductByDiseases">
		<id column="id" property="id" />
		<result column="did" property="did" />
		<association property="product" javaType="com.bean.Products">
			<id column="pid" property="id" />
			<result column="pname" property="pname" />
			<result column="price" property="price" />
			<result column="pdescription" property="pdescription" />
			<result column="count" property="count" />
			<result column="producturl" property="producturl" />
			<result column="tid" property="tid" />
			<collection property="listPhotos" ofType="com.bean.Showsphotos">
				<id column="sp_id" property="id" />
				<result column="image" property="image" />
			</collection>
		</association>
	</resultMap>
	<resultMap type="com.bean.Matchdisease" id="ProductByDiseasesId">
		<id column="mid" property="id" />
		<result column="did" property="did" />
		<association property="product" javaType="com.bean.Products">
			<id column="pid" property="id" />
			<result column="pname" property="pname" />
			<result column="price" property="price" />
			<result column="pdescription" property="pdescription" />
			<result column="producturl" property="producturl" />
		</association>
	</resultMap>
	<!--前台推荐 -->
	<resultMap type="com.bean.Matchdisease" id="matchProducts">
		<id column="matchDiseaeId" property="id" />
		<result column="did" property="did" />
		<result column="pid" property="pid" />
		<!-- <collection property="classification" ofType="com.bean.Classification"> 
			<id column="classId" property="id" /> <result column="classname" property="classname" 
			/> -->
		<association property="product" javaType="com.bean.Products">
			<id column="productId" property="id" />
			<result column="count" property="count" />
			<result column="pdescription" property="pdescription" />
			<result column="pname" property="pname" />
			<result column="price" property="price" />
			<result column="size" property="size" />
			<result column="tid" property="tid" />
			<result column="producturl" property="producturl" />
			<result column="productscolor" property="productscolor" />
			<result column="productstype1" property="productstype1" />
			<result column="productstype2" property="productstype2" />

		</association>
		<collection property="oldSickness" ofType="com.bean.OldSickness">
			<id column="sicknessId" property="id" />
			<result column="detailid" property="detailid" />
			<result column="did" property="did" />
			<collection property="oldDiseaselibrary" ofType="com.bean.OldDiseaselibrary">
				<id column="diseaselibraryId" property="id" />
				<result column="description" property="description" />
				<result column="diseasename" property="diseasename" />
				<result column="alias" property="alias" />
				<association property="oldDiseasedetails" javaType="com.bean.OldDiseasedetails">
					<id column="detailid" property="id" />
					<result column="uid" property="uid" />
					<result column="treattiem" property="treatTiem" />
					<result column="suggest" property="suggest" />
					<result column="history" property="history" />

				</association>
			</collection>
		</collection>
		<!-- </collection> -->
	</resultMap>
	<!-- -->
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		id, pid, did, extended1, extended2, extended3, extended4, extended5,
		extended6, extended7,
		extended8, extended9, extended10, extended11,
		extended12, extended13,
		extended14,
		extended15, extended16, extended17,
		extended18, extended19, extended20
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<include refid="Base_Column_List" />
		from matchdisease
		where id = #{id,jdbcType=INTEGER}
	</select>

	<select id="selectProductByDiseasesId" resultMap="ProductByDiseases"
		parameterType="java.lang.Integer">
		SELECT md.id id,md.did did,p.id pid,p.pname
		pname,p.price
		price,p.pdescription pdescription,p.count
		count,p.producturl
		producturl,p.tid tid,sp.id sp_id,sp.image
		image
		from
		old_sickness os,matchdisease md,products p,showsphotos sp
		WHERE
		os.did=md.did AND md.pid=p.id and os.did=#{id,jdbcType=INTEGER}
	</select>
	<select id="selectByDiseasesId" resultMap="ProductByDiseasesId"
		parameterType="java.lang.Integer">
		SELECT md.id mid,md.did did,p.id pid,p.pname
		pname,p.price
		price,p.pdescription pdescription,p.producturl producturl
		from
		matchdisease md,products p
		WHERE
		md.pid=p.id and md.did=#{id,jdbcType=INTEGER}
	</select>

	<!--根据用户的患病情况推荐 -->
	<select id="queryProductByUid" parameterType="java.lang.String"
		resultMap="matchProducts">
		SELECT
		matchdisease.id matchDiseaeId,matchdisease.did
		did,matchdisease.pid pid,

		old_DiseaseDetails.id
		detailid,old_DiseaseDetails.uid
		uid,old_DiseaseDetails.treat_tiem
		treattiem,
		old_DiseaseDetails.suggest
		suggest,old_DiseaseDetails.history history,

		old_Sickness.id
		sicknessId,old_Sickness.detailid
		detailid,old_Sickness.did did,

		old_Diseaselibrary.id diseaselibraryId,old_Diseaselibrary.description
		description,
		old_Diseaselibrary.diseasename
		diseasename,old_Diseaselibrary.alias
		alias,

		<!-- classification.id classId,classification.classname classname, -->

		products.id productId,products.count count,products.pdescription
		pdescription,products.pname pname,
		products.price price,products.size
		size,products.tid tid,products.producturl
		producturl,
		products.productscolor productscolor,products.productstype1
		productstype1,products.productstype2 productstype2
		from
		old_DiseaseDetails,
		<!-- classification, -->
		old_Sickness, old_Diseaselibrary,matchdisease,products
		where
		old_DiseaseDetails.id=old_Sickness.detailid
		AND
		old_Sickness.did=old_Diseaselibrary.id
		AND
		matchdisease.did=
		old_Diseaselibrary.id
		AND
		matchdisease.pid=products.id
		<!-- AND classification.id=products.tid -->
		AND
		old_DiseaseDetails.uid=#{uid,jdbcType=VARCHAR}

	</select>

	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from matchdisease
		where id = #{id,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.bean.Matchdisease">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into matchdisease (id, pid, did,
		extended1, extended2,
		extended3,
		extended4, extended5, extended6,
		extended7, extended8,
		extended9,
		extended10, extended11, extended12,
		extended13, extended14,
		extended15,
		extended16, extended17, extended18,
		extended19, extended20)
		values (#{id,jdbcType=INTEGER}, #{pid,jdbcType=INTEGER},
		#{did,jdbcType=INTEGER},
		#{extended1,jdbcType=VARCHAR},
		#{extended2,jdbcType=VARCHAR}, #{extended3,jdbcType=VARCHAR},
		#{extended4,jdbcType=VARCHAR}, #{extended5,jdbcType=VARCHAR},
		#{extended6,jdbcType=VARCHAR},
		#{extended7,jdbcType=VARCHAR},
		#{extended8,jdbcType=VARCHAR}, #{extended9,jdbcType=VARCHAR},
		#{extended10,jdbcType=VARCHAR}, #{extended11,jdbcType=VARCHAR},
		#{extended12,jdbcType=VARCHAR},
		#{extended13,jdbcType=VARCHAR},
		#{extended14,jdbcType=VARCHAR}, #{extended15,jdbcType=VARCHAR},
		#{extended16,jdbcType=VARCHAR}, #{extended17,jdbcType=VARCHAR},
		#{extended18,jdbcType=VARCHAR},
		#{extended19,jdbcType=VARCHAR},
		#{extended20,jdbcType=VARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.bean.Matchdisease">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into matchdisease
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="pid != null">
				pid,
			</if>
			<if test="did != null">
				did,
			</if>
			<if test="extended1 != null">
				extended1,
			</if>
			<if test="extended2 != null">
				extended2,
			</if>
			<if test="extended3 != null">
				extended3,
			</if>
			<if test="extended4 != null">
				extended4,
			</if>
			<if test="extended5 != null">
				extended5,
			</if>
			<if test="extended6 != null">
				extended6,
			</if>
			<if test="extended7 != null">
				extended7,
			</if>
			<if test="extended8 != null">
				extended8,
			</if>
			<if test="extended9 != null">
				extended9,
			</if>
			<if test="extended10 != null">
				extended10,
			</if>
			<if test="extended11 != null">
				extended11,
			</if>
			<if test="extended12 != null">
				extended12,
			</if>
			<if test="extended13 != null">
				extended13,
			</if>
			<if test="extended14 != null">
				extended14,
			</if>
			<if test="extended15 != null">
				extended15,
			</if>
			<if test="extended16 != null">
				extended16,
			</if>
			<if test="extended17 != null">
				extended17,
			</if>
			<if test="extended18 != null">
				extended18,
			</if>
			<if test="extended19 != null">
				extended19,
			</if>
			<if test="extended20 != null">
				extended20,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="pid != null">
				#{pid,jdbcType=INTEGER},
			</if>
			<if test="did != null">
				#{did,jdbcType=INTEGER},
			</if>
			<if test="extended1 != null">
				#{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				#{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				#{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				#{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				#{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				#{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				#{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				#{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				#{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				#{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				#{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				#{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				#{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				#{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				#{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				#{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				#{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				#{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				#{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				#{extended20,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.bean.Matchdisease">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update matchdisease
		<set>
			<if test="pid != null">
				pid = #{pid,jdbcType=INTEGER},
			</if>
			<if test="did != null">
				did = #{did,jdbcType=INTEGER},
			</if>
			<if test="extended1 != null">
				extended1 = #{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				extended2 = #{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				extended3 = #{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				extended4 = #{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				extended5 = #{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				extended6 = #{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				extended7 = #{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				extended8 = #{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				extended9 = #{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				extended10 = #{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				extended11 = #{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				extended12 = #{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				extended13 = #{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				extended14 = #{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				extended15 = #{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				extended16 = #{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				extended17 = #{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				extended18 = #{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				extended19 = #{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				extended20 = #{extended20,jdbcType=VARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.bean.Matchdisease">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update matchdisease
		set pid = #{pid,jdbcType=INTEGER},
		did =
		#{did,jdbcType=INTEGER},
		extended1 = #{extended1,jdbcType=VARCHAR},
		extended2 = #{extended2,jdbcType=VARCHAR},
		extended3 =
		#{extended3,jdbcType=VARCHAR},
		extended4 =
		#{extended4,jdbcType=VARCHAR},
		extended5 =
		#{extended5,jdbcType=VARCHAR},
		extended6 =
		#{extended6,jdbcType=VARCHAR},
		extended7 =
		#{extended7,jdbcType=VARCHAR},
		extended8 =
		#{extended8,jdbcType=VARCHAR},
		extended9 =
		#{extended9,jdbcType=VARCHAR},
		extended10 =
		#{extended10,jdbcType=VARCHAR},
		extended11 =
		#{extended11,jdbcType=VARCHAR},
		extended12 =
		#{extended12,jdbcType=VARCHAR},
		extended13 =
		#{extended13,jdbcType=VARCHAR},
		extended14 =
		#{extended14,jdbcType=VARCHAR},
		extended15 =
		#{extended15,jdbcType=VARCHAR},
		extended16 =
		#{extended16,jdbcType=VARCHAR},
		extended17 =
		#{extended17,jdbcType=VARCHAR},
		extended18 =
		#{extended18,jdbcType=VARCHAR},
		extended19 =
		#{extended19,jdbcType=VARCHAR},
		extended20 =
		#{extended20,jdbcType=VARCHAR}
		where id = #{id,jdbcType=INTEGER}
	</update>
	<!-- 前台病例 -->
	<select id="queryOldUserDiseaseDetails" parameterType="java.lang.String"
		resultMap="diseaseDetails">

		SELECT
		old_DiseaseDetails.id id,old_DiseaseDetails.uid
		uid,old_DiseaseDetails.treat_tiem treat_tiem,

		old_DiseaseDetails.suggest suggest,old_DiseaseDetails.history history,

		old_Sickness.id sicknessId,old_Sickness.detailid
		detailid,old_Sickness.did did,

		old_Diseaselibrary.id diseaselibraryId,
		old_Diseaselibrary.description description,

		old_Diseaselibrary.diseasename diseasename,old_Diseaselibrary.alias
		alias

		from
		old_Sickness, old_Diseaselibrary,old_DiseaseDetails
		where
		old_DiseaseDetails.id=old_Sickness.detailid
		AND
		old_Sickness.did=old_Diseaselibrary.id
		AND
		old_DiseaseDetails.uid=#{uid,jdbcType=VARCHAR}

	</select>
</mapper>