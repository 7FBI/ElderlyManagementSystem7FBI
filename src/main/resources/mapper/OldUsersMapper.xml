<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dao.OldUsersMapper">
	<!-- 查询所有用户 -->
	<resultMap type="com.bean.OldUsers" id="alluserdetail">
		<id column="id" property="id" />
		<result column="username" property="username" />
		<result column="sex" property="sex" />
		<result column="uid" property="uid" />
		<result column="idcard" property="idcard" />
		<result column="birthday" property="birthday" />
		<result column="tell" property="tell" />
		<result column="address" property="address" />
		<result column="password" property="password" />
		<result column="balance" property="balance" />
		<result column="type" property="type" />
		<association property="localarea" javaType="com.bean.Localarea">
			<id column="lid" property="id" />
			<result column="myarea" property="provincename" />
		</association>
	</resultMap>

	<resultMap id="BaseResultMap" type="com.bean.OldUsers">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<constructor>
			<idArg column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="username" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="sex" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="idcard" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="birthday" jdbcType="DATE" javaType="java.util.Date" />
			<arg column="tell" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="address" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="area" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="uid" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="password" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="userurl" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="balance" jdbcType="DOUBLE" javaType="java.lang.Double" />
			<arg column="type" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="extended1" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended2" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended3" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended4" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended5" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended6" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended7" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended8" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended9" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended10" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended11" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended12" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended13" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended14" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended15" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended16" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended17" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended18" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended19" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended20" jdbcType="VARCHAR" javaType="java.lang.String" />
		</constructor>
	</resultMap>









	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		id, username, sex, idcard, birthday, tell, address, area, uid,
		password, userurl,balance,type,
		extended1, extended2, extended3,
		extended4, extended5, extended6, extended7,
		extended8,
		extended9,
		extended10, extended11, extended12, extended13, extended14,
		extended15,
		extended16, extended17, extended18, extended19, extended20
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<include refid="Base_Column_List" />
		from old_users
		where id = #{id,jdbcType=INTEGER}
	</select>

	<select id="selectByLikeUserName" resultMap="BaseResultMap"
		parameterType="hashMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<include refid="Base_Column_List" />
		from old_users
		<where>
			<if test="username!=null"> and (username like '%${username}%' or uid=#{username} )
			</if>
			<if test="sex!=null"> and sex=#{sex}</if>
		</where>
	</select>
<!--更据电话查  -->
<select id="queryByTell" parameterType="java.lang.String" resultMap="BaseResultMap">
select * from old_users where tell=#{tell}
</select>
<!--更据身份证查  -->
<select id="queryByIdCard" parameterType="java.lang.String" resultMap="BaseResultMap">
select * from old_users where queryByIdCard=#{queryByIdCard}
</select>

	<!-- 查询所有用户 -->
	<select id="queryUsers" resultMap="alluserdetail">
		<!-- select * from old_users -->
		<!-- select @row := @row +1 AS row, username,sex,localarea.provincename 
			area,uid from localarea,old_users, ( SELECT @row :=0 )r ; -->
		<!-- select old_users.id oid,username,sex,uid,localarea.provincename myarea, 
			localarea.id lid from localarea,old_users where localarea.id=old_users.area -->
		select old_users.id
		id,username,sex,idcard,birthday,tell,address,uid,password,userurl,localarea.provincename
		myarea, localarea.id lid from localarea,old_users where
		localarea.id=old_users.area
	</select>
	<!--根据uid查询 -->
	<select id="queryByUid" parameterType="com.bean.OldUsers"
		resultMap="alluserdetail">
		select old_users.id
		id,username,sex,idcard,birthday,tell,address,uid,password,userurl,balance,localarea.provincename
		myarea, localarea.id from localarea,old_users where
		localarea.id=old_users.area and uid=#{uid}
	</select>

	<!-- 根据条件查询用户 -->
	<select id="queryByConditions" parameterType="java.lang.String"
		resultMap="alluserdetail">
		select old_users.id
		id,username,sex,idcard,birthday,tell,address,uid,password,userurl,balance,localarea.provincename
		myarea, localarea.id lid from localarea,old_users
		<where>
			localarea.id=old_users.area
			<if test="value!= null and value!=''">

				and (localarea.provincename=#{value} or
				old_users.username=#{value} or
				old_users.uid=#{value} )

			</if>
		</where>
	</select>
	<!--根据管理员的地址信息查找出该地所有的用户 -->
	<select id="findAllUserByManager" parameterType="java.lang.Integer"
		resultMap="alluserdetail">
		<!-- select old_users.id id,username,sex, idcard,birthday,tell,address,uid,password, 
			userurl,localarea.provincename myarea, localarea.id lid from localarea,old_users,manager 
			where localarea.id=manager.locaid and old_users.area=manager.locaid and manager.locaid=#{locaid,jdbcType=INTEGER} -->
		CREATE OR REPLACE view
		localuser(id,username,sex,idcard,birthday,tell,address,uid,password,userurl,balance,type,myarea,lid)
		AS
		select old_users.id id,username,sex,
		idcard,birthday,tell,address,uid,password,
		userurl,balance,type,localarea.provincename myarea,
		localarea.id lid from
		localarea,old_users,manager
		where localarea.id=manager.locaid
		and
		old_users.area=manager.locaid
		and
		manager.locaid=#{locaid,jdbcType=INTEGER}
	</select>
	<!--为用户充钱 -->
	<update id="addUserMoney" parameterType="com.bean.OldUsers">
		update old_users
		<set>
			<if test="balance != null">
				balance =balance + #{balance,jdbcType=DOUBLE},
			</if>
		</set>
		where id = #{id}
	</update>
	<!-- 修改用户信息 -->
	<update id="modifyById" parameterType="com.bean.OldUsers">
		update old_users
		<set>
			<if test="username != null">
				username = #{username,jdbcType=VARCHAR},
			</if>
			<if test="sex != null">
				sex = #{sex,jdbcType=INTEGER},
			</if>
			<if test="idcard != null">
				idcard = #{idcard,jdbcType=VARCHAR},
			</if>
			<if test="birthday != null">
				birthday = #{birthday,jdbcType=DATE},
			</if>
			<if test="tell != null">
				tell = #{tell,jdbcType=VARCHAR},
			</if>
			<if test="address != null">
				address = #{address,jdbcType=VARCHAR},
			</if>
			<if test="area != null">
				area = #{area,jdbcType=INTEGER},
			</if>
			<if test="uid != null">
				uid = #{uid,jdbcType=VARCHAR},
			</if>
			<if test="password != null">
				password = #{password,jdbcType=VARCHAR},
			</if>
			<if test="userurl != null">
				userurl = #{userurl,jdbcType=VARCHAR},
			</if>
			<if test="balance != null">
				balance = #{balance,jdbcType=DOUBLE},
			</if>
			<if test="type != null">
				type = #{type,jdbcType=INTEGER},
			</if>

		</set>
		where id = #{id}
	</update>
	<select id="queryById" parameterType="java.lang.Integer"
		resultMap="alluserdetail">
		select old_users.id
		id,username,sex,idcard,birthday,tell,address,uid,password,userurl,balance,type,localarea.provincename
		myarea, localarea.id from localarea,old_users where
		localarea.id=old_users.area and old_users.id=#{id}
	</select>
	<!-- 根据用户id删除用基本信息及消费记录 -->
	<delete id="deleteUserById" parameterType="com.bean.OldUsers">
		delete from old_users
		where id = #{id,jdbcType=INTEGER}
	</delete>

	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from old_users
		where id = #{id,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.bean.OldUsers">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into old_users (id, username, sex,
		idcard, birthday, tell,
		address, area, uid,
		password, userurl,balance,type, extended1,
		extended2, extended3, extended4,
		extended5, extended6, extended7,
		extended8, extended9, extended10,
		extended11, extended12, extended13,
		extended14, extended15, extended16,
		extended17, extended18, extended19,
		extended20)
		values (#{id,jdbcType=INTEGER},
		#{username,jdbcType=VARCHAR},
		#{sex,jdbcType=INTEGER},
		#{idcard,jdbcType=VARCHAR}, #{birthday,jdbcType=DATE},
		#{tell,jdbcType=VARCHAR},
		#{address,jdbcType=VARCHAR},
		#{area,jdbcType=INTEGER},
		#{uid,jdbcType=VARCHAR},
		#{password,jdbcType=VARCHAR},
		#{userurl,jdbcType=VARCHAR},#{balance,jdbcType=DOUBLE},
		#{type,jdbcType=INTEGER}, #{extended1,jdbcType=VARCHAR},
		#{extended2,jdbcType=VARCHAR}, #{extended3,jdbcType=VARCHAR},
		#{extended4,jdbcType=VARCHAR},
		#{extended5,jdbcType=VARCHAR},
		#{extended6,jdbcType=VARCHAR}, #{extended7,jdbcType=VARCHAR},
		#{extended8,jdbcType=VARCHAR}, #{extended9,jdbcType=VARCHAR},
		#{extended10,jdbcType=VARCHAR},
		#{extended11,jdbcType=VARCHAR},
		#{extended12,jdbcType=VARCHAR}, #{extended13,jdbcType=VARCHAR},
		#{extended14,jdbcType=VARCHAR}, #{extended15,jdbcType=VARCHAR},
		#{extended16,jdbcType=VARCHAR},
		#{extended17,jdbcType=VARCHAR},
		#{extended18,jdbcType=VARCHAR}, #{extended19,jdbcType=VARCHAR},
		#{extended20,jdbcType=VARCHAR})
	</insert>
	<!-- 添加老人用户 -->
	<insert id="insertOldUsers" parameterType="com.bean.OldUsers">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into old_users
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="username != null">
				username,
			</if>
			<if test="sex != null">
				sex,
			</if>
			<if test="idcard != null">
				idcard,
			</if>
			<if test="birthday != null">
				birthday,
			</if>
			<if test="tell != null">
				tell,
			</if>
			<if test="address != null">
				address,
			</if>
			<if test="area != null">
				area,
			</if>
			<if test="uid != null">
				uid,
			</if>
			<if test="password != null">
				password,
			</if>
			<if test="userurl != null">
				userurl,
			</if>
			<if test="balance != null">
				balance,
			</if>
			<if test="type != null">
				type,
			</if>
			<if test="extended1 != null">
				extended1,
			</if>
			<if test="extended2 != null">
				extended2,
			</if>
			<if test="extended3 != null">
				extended3,
			</if>
			<if test="extended4 != null">
				extended4,
			</if>
			<if test="extended5 != null">
				extended5,
			</if>
			<if test="extended6 != null">
				extended6,
			</if>
			<if test="extended7 != null">
				extended7,
			</if>
			<if test="extended8 != null">
				extended8,
			</if>
			<if test="extended9 != null">
				extended9,
			</if>
			<if test="extended10 != null">
				extended10,
			</if>
			<if test="extended11 != null">
				extended11,
			</if>
			<if test="extended12 != null">
				extended12,
			</if>
			<if test="extended13 != null">
				extended13,
			</if>
			<if test="extended14 != null">
				extended14,
			</if>
			<if test="extended15 != null">
				extended15,
			</if>
			<if test="extended16 != null">
				extended16,
			</if>
			<if test="extended17 != null">
				extended17,
			</if>
			<if test="extended18 != null">
				extended18,
			</if>
			<if test="extended19 != null">
				extended19,
			</if>
			<if test="extended20 != null">
				extended20,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="username != null">
				#{username,jdbcType=VARCHAR},
			</if>
			<if test="sex != null">
				#{sex,jdbcType=INTEGER},
			</if>
			<if test="idcard != null">
				#{idcard,jdbcType=VARCHAR},
			</if>
			<if test="birthday != null">
				#{birthday,jdbcType=DATE},
			</if>
			<if test="tell != null">
				#{tell,jdbcType=VARCHAR},
			</if>
			<if test="address != null">
				#{address,jdbcType=VARCHAR},
			</if>
			<if test="area != null">
				#{area,jdbcType=INTEGER},
			</if>
			<if test="uid != null">
				#{uid,jdbcType=VARCHAR},
			</if>
			<if test="password != null">
				#{password,jdbcType=VARCHAR},
			</if>
			<if test="userurl != null">
				#{userurl,jdbcType=VARCHAR},
			</if>
			<if test="balance != null">
				#{balance,jdbcType=DOUBLE},
			</if>
			<if test="type != null">
				#{type,jdbcType=INTEGER},
			</if>
			<if test="extended1 != null">
				#{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				#{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				#{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				#{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				#{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				#{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				#{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				#{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				#{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				#{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				#{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				#{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				#{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				#{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				#{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				#{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				#{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				#{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				#{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				#{extended20,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<insert id="insertSelective" useGeneratedKeys="true"
		keyProperty="id" parameterType="com.bean.OldUsers">
		insert into old_users
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="username != null">
				username,
			</if>
			<if test="sex != null">
				sex,
			</if>
			<if test="idcard != null">
				idcard,
			</if>
			<if test="birthday != null">
				birthday,
			</if>
			<if test="tell != null">
				tell,
			</if>
			<if test="address != null">
				address,
			</if>
			<if test="area != null">
				area,
			</if>
			<if test="uid != null">
				uid,
			</if>
			<if test="password != null">
				password,
			</if>
			<if test="userurl != null">
				userurl,
			</if>

			<if test="balance != null">
				balance,
			</if>
			<if test="type != null">
				type,
			</if>
			<if test="extended1 != null">
				extended1,
			</if>
			<if test="extended2 != null">
				extended2,
			</if>
			<if test="extended3 != null">
				extended3,
			</if>
			<if test="extended4 != null">
				extended4,
			</if>
			<if test="extended5 != null">
				extended5,
			</if>
			<if test="extended6 != null">
				extended6,
			</if>
			<if test="extended7 != null">
				extended7,
			</if>
			<if test="extended8 != null">
				extended8,
			</if>
			<if test="extended9 != null">
				extended9,
			</if>
			<if test="extended10 != null">
				extended10,
			</if>
			<if test="extended11 != null">
				extended11,
			</if>
			<if test="extended12 != null">
				extended12,
			</if>
			<if test="extended13 != null">
				extended13,
			</if>
			<if test="extended14 != null">
				extended14,
			</if>
			<if test="extended15 != null">
				extended15,
			</if>
			<if test="extended16 != null">
				extended16,
			</if>
			<if test="extended17 != null">
				extended17,
			</if>
			<if test="extended18 != null">
				extended18,
			</if>
			<if test="extended19 != null">
				extended19,
			</if>
			<if test="extended20 != null">
				extended20,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="username != null">
				#{username,jdbcType=VARCHAR},
			</if>
			<if test="sex != null">
				#{sex,jdbcType=INTEGER},
			</if>
			<if test="idcard != null">
				#{idcard},
			</if>
			<if test="birthday != null">
				#{birthday,jdbcType=DATE},
			</if>
			<if test="tell != null">
				#{tell},
			</if>
			<if test="address != null">
				#{address,jdbcType=VARCHAR},
			</if>
			<if test="area != null">
				#{area,jdbcType=INTEGER},
			</if>
			<if test="uid != null">
				#{uid},
			</if>
			<if test="password != null">
				#{password},
			</if>
			<if test="userurl != null">
				#{userurl,jdbcType=VARCHAR},
			</if>
			<if test="balance != null">
				#{balance},
			</if>
			<if test="type != null">
				#{type},
			</if>
			<if test="extended1 != null">
				#{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				#{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				#{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				#{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				#{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				#{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				#{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				#{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				#{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				#{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				#{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				#{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				#{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				#{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				#{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				#{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				#{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				#{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				#{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				#{extended20,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.bean.OldUsers">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update old_users
		<set>
			<if test="username != null">
				username = #{username,jdbcType=VARCHAR},
			</if>
			<if test="sex != null">
				sex = #{sex,jdbcType=INTEGER},
			</if>
			<if test="idcard != null">
				idcard = #{idcard,jdbcType=VARCHAR},
			</if>
			<if test="birthday != null">
				birthday = #{birthday,jdbcType=DATE},
			</if>
			<if test="tell != null">
				tell = #{tell,jdbcType=VARCHAR},
			</if>
			<if test="address != null">
				address = #{address,jdbcType=VARCHAR},
			</if>
			<if test="area != null">
				area = #{area,jdbcType=INTEGER},
			</if>
			<if test="uid != null">
				uid = #{uid,jdbcType=VARCHAR},
			</if>
			<if test="password != null">
				password = #{password,jdbcType=VARCHAR},
			</if>
			<if test="userurl != null">
				userurl = #{userurl,jdbcType=VARCHAR},
			</if>

			<if test="balance != null">
				balance = #{balance,jdbcType=DOUBLE},
			</if>
			<if test="type != null">
				type = #{type,jdbcType=INTEGER},
			</if>
			<if test="extended1 != null">
				extended1 = #{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				extended2 = #{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				extended3 = #{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				extended4 = #{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				extended5 = #{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				extended6 = #{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				extended7 = #{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				extended8 = #{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				extended9 = #{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				extended10 = #{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				extended11 = #{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				extended12 = #{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				extended13 = #{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				extended14 = #{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				extended15 = #{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				extended16 = #{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				extended17 = #{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				extended18 = #{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				extended19 = #{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				extended20 = #{extended20,jdbcType=VARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.bean.OldUsers">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update old_users
		set username = #{username,jdbcType=VARCHAR},
		sex =
		#{sex,jdbcType=INTEGER},
		idcard = #{idcard,jdbcType=VARCHAR},
		birthday =
		#{birthday,jdbcType=DATE},
		tell = #{tell,jdbcType=VARCHAR},
		address =
		#{address,jdbcType=VARCHAR},
		area = #{area,jdbcType=INTEGER},
		uid =
		#{uid,jdbcType=VARCHAR},
		password = #{password,jdbcType=VARCHAR},
		userurl = #{userurl,jdbcType=VARCHAR},
		balance =
		#{balance,jdbcType=DOUBLE},
		type = #{type,jdbcType=INTEGER},
		extended1 =
		#{extended1,jdbcType=VARCHAR},
		extended2 =
		#{extended2,jdbcType=VARCHAR},
		extended3 =
		#{extended3,jdbcType=VARCHAR},
		extended4 =
		#{extended4,jdbcType=VARCHAR},
		extended5 =
		#{extended5,jdbcType=VARCHAR},
		extended6 =
		#{extended6,jdbcType=VARCHAR},
		extended7 =
		#{extended7,jdbcType=VARCHAR},
		extended8 =
		#{extended8,jdbcType=VARCHAR},
		extended9 =
		#{extended9,jdbcType=VARCHAR},
		extended10 =
		#{extended10,jdbcType=VARCHAR},
		extended11 =
		#{extended11,jdbcType=VARCHAR},
		extended12 =
		#{extended12,jdbcType=VARCHAR},
		extended13 =
		#{extended13,jdbcType=VARCHAR},
		extended14 =
		#{extended14,jdbcType=VARCHAR},
		extended15 =
		#{extended15,jdbcType=VARCHAR},
		extended16 =
		#{extended16,jdbcType=VARCHAR},
		extended17 =
		#{extended17,jdbcType=VARCHAR},
		extended18 =
		#{extended18,jdbcType=VARCHAR},
		extended19 =
		#{extended19,jdbcType=VARCHAR},
		extended20 =
		#{extended20,jdbcType=VARCHAR}
		where id = #{id,jdbcType=INTEGER}
	</update>

	<select id="selectByUid" resultType="OldUsers" parameterType="java.lang.String">
		select * from old_users where uid = #{uid}
	</select>



	<update id="updateByUidSelective" parameterType="oldUsers">

		update old_users
		<set>
			<if test="username != null">
				username = #{username,jdbcType=VARCHAR},
			</if>
			<if test="sex != null">
				sex= #{sex,jdbcType=INTEGER},
			</if>
			<if test="idcard != null">
				idcard = #{idcard,jdbcType=VARCHAR},
			</if>
			<if test="birthday != null">
				birthday = #{birthday,jdbcType=DATE},
			</if>
			<if test="tell != null">
				tell = #{tell,jdbcType=VARCHAR},
			</if>
			<if test="address != null">
				address = #{address,jdbcType=VARCHAR},
			</if>
			<if test="area != null">
				area = #{area,jdbcType=INTEGER},
			</if>
			<if test="userurl != null">
				userurl = #{userurl,jdbcType=VARCHAR},
			</if>
			<if test="balance != null">
				balance = #{balance,jdbcType=DOUBLE},
			</if>
			<if test="type != null">
				type = #{type,jdbcType=INTEGER},
			</if>
			<if test="extended1 != null">
				extended1 = #{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				extended2 = #{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">

				extended3 = #{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				extended4 = #{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				extended5 = #{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				extended6 = #{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				extended7 = #{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				extended8 = #{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				extended9 = #{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				extended10 = #{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				extended11 = #{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				extended12 = #{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				extended14 = #{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				extended14 = #{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				extended15 = #{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				extended16 = #{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				extended17 = #{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				extended18 = #{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				extended19 = #{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				extended20 = #{extended20,jdbcType=VARCHAR},
			</if>
		</set>
		where uid = #{uid}
	</update>

	<!-- 用户前台修改密码 -->
	<update id="updatePasswordByUid" parameterType="OldUsers">
		update old_users
		set password=#{password} where uid=#{uid}
	</update>



	<select id="findUserNameById" resultType="com.bean.OldUsers">
		select uid from
		old_users
	</select>

	<!--分页 -->
	<select id="findUserMap" parameterType="hashMap" resultMap="alluserdetail">
		select * from localuser ORDER BY id LIMIT #{page},#{max}
	</select>

	<!--查询出各地所有的用户数 -->
	<select id="getOldUsersCount" resultType="java.lang.Integer">
		SELECT count(*) from
		localuser
	</select>
	<!-- 查询出是否存在 -->
	<select id="selectByTellOrUidOrIdcard" parameterType="hashMap"
		resultMap="BaseResultMap">
		select * from old_users
		<where>
			<if test="tell !=null "> or tell=#{tell}</if>
			<if test="uid !=null "> or uid=#{uid}</if>
			<if test="idcard !=null "> or idcard=#{idcard}</if>
		</where>
	</select>

	<!--观看收费视频 -->
	<update id="watchVideo" parameterType="hashMap">
		UPDATE old_users SET
		balance=balance-#{videoPrice} WHERE uid=#{userUid}
	</update>

<!--参与付费活动  -->
	<update id="joinActivity" parameterType="hashMap">
	   UPDATE old_users SET balance=balance-#{activityPrice} WHERE uid=#{userUid}
	</update>
	<!-- 取消活动退费 -->
	<update id="turnBackMyBalance" parameterType="hashMap">
	 UPDATE old_users SET balance=balance+#{price} WHERE uid=#{userUid}
	</update>


	<!-- 此处的id与最上面的map的id重复 -->
		<!-- <resultMap type="com.bean.OldUsers" id="alluserdetail">
		<id column="id" property="id" />
		<result column="username" property="username" />
		<result column="sex" property="sex" />
		<result column="uid" property="uid" />
		<result column="idcard" property="idcard" />
		<result column="birthday" property="birthday" />
		<result column="tell" property="tell" />
		<result column="address" property="address" />
		<result column="password" property="password" />
		<result column="balance" property="balance" />
		<result column="type" property="type" />
	</resultMap>
 -->


	<resultMap type="com.bean.OldUsers" id="oldUsersSumNumAndDates">
		<result column="sumNum" property="sumNum" />
		<result column="dates" property="dates" />
	</resultMap>
	
	<resultMap type="com.bean.OldUsers" id="oldUsersSumNumAndType">
		<result column="sumNum" property="sumNum" />
		<result column="type" property="type" />
	</resultMap>
	
	<resultMap type="com.bean.OldUsers" id="oldUsersSumMoneyAndDates">
		<result column="sumMoney" property="sumMoney" />
		<result column="dates" property="dates" />
	</resultMap>
	
	<resultMap type="com.bean.OldUsers" id="oldUsersSumMoneyAndDatesYearAndSumNum">
		<result column="sumMoney" property="sumMoney" />
		<result column="dateYear" property="dateYear" />
		<result column="sumNum" property="sumNum" />
	</resultMap>

	<!-- 查询今年某用户消费情况 -->
	<select id="seleteOldUsersOrdersMoneysAndDate" parameterType="hashMap"
		resultMap="oldUsersSumMoneyAndDates">
		SELECT COALESCE(SUM(o.money),0) sumMoney
		,DATE_FORMAT(o.ordertime,'%Y-%m-%d') dates
		from
		old_users u,orders o
		where
		o.uid=u.uid and u.uid=#{uid}
		and YEAR(o.ordertime) = YEAR(now())
		GROUP
		BY
		DATE_FORMAT(o.ordertime,'%Y-%m')
	</select>

	<!-- 查询某用户每年点消费情况 -->
	<select id="seleteOldUsersOrdersMoneysAndDateYearAll"
		parameterType="hashMap" resultMap="oldUsersSumMoneyAndDatesYearAndSumNum">
		SELECT COALESCE(SUM(o.money),0)
		sumMoney ,DATE_FORMAT(o.ordertime,'%Y-%m-%d') dateYear,
		COALESCE(count(o.id),0) sumNum
		from old_users u,orders o
		where
		o.uid=u.uid and u.uid=#{uid} GROUP BY
		DATE_FORMAT(o.ordertime,'%Y')
	</select>
	
	<!-- 查询某用户每月登录情况 -->
	<select id="seleteOldUsersLoginNumber"
		parameterType="hashMap" resultMap="oldUsersSumNumAndDates">
		SELECT COALESCE(COUNT(ol.loadtime),0) sumNum,DATE_FORMAT(ol.loadtime,'%Y-%m-%d') dates
		FROM old_users u,oldlogin ol
		WHERE u.uid=ol.uid and u.uid=#{uid} GROUP BY
		DATE_FORMAT(ol.loadtime,'%Y-%m')
	</select>
	
	<!-- 查询总用户量(分类) -->
	<select id="seleteOldUsersTypesAll" parameterType="hashMap" resultMap="oldUsersSumNumAndType">
		SELECT DISTINCT COALESCE(COUNT(*),0) sumNum,u.type
		FROM old_users u
		GROUP BY u.type ORDER BY u.type
	</select>
	
	<!-- 查询总分店量(还有店长) -->
	<select id="selectCountAreaNumbers" resultMap="oldUsersSumNumAndType">
		SELECT COALESCE((SELECT COUNT(*) FROM manager m),0) type,COALESCE((SELECT COUNT(*)FROM localarea l),0) sumNum
	</select>
	
	<!-- 查询总商品量(还有存货) -->
	<select id="selectCountProductCounts" resultMap="oldUsersSumNumAndType">
		SELECT COALESCE(COUNT(*),0) sumNum, COALESCE(SUM(p.count),0) type from products p 
	</select>

</mapper>