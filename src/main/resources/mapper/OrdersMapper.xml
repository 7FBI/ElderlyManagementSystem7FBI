<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.OrdersMapper">
	<resultMap id="BaseResultMap" type="com.bean.Orders">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<constructor>
			<idArg column="id" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="ordertime" javaType="java.util.Date" jdbcType="DATE" />
			<arg column="orderaddress" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="uid" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="orderstatus" javaType="java.lang.Integer" jdbcType="INTEGER" />
			<arg column="payment" javaType="java.lang.Integer" jdbcType="INTEGER" />
			<arg column="remarks" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="money" javaType="java.lang.Double" jdbcType="DOUBLE" />
			<arg column="tell" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended1" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended2" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended3" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended4" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended5" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended6" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended7" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended8" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended9" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended10" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended11" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended12" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended13" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended14" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended15" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended16" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended17" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended18" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended19" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended20" javaType="java.lang.String" jdbcType="VARCHAR" />
		</constructor>
	</resultMap>


	<resultMap id="OrdersAndDetailProdout" type="com.bean.Orders">
		<id column="id" property="id" />
		<result column="ordertime" property="ordertime" />
		<result column="orderaddress" property="orderaddress" />
		<result column="uid" property="uid" />
		<result column="orderstatus" property="orderstatus" />
		<result column="payment" property="payment" />
		<result column="remarks" property="remarks" />
		<result column="money" property="money" />
		<result column="tell" property="tell" />
		<collection property="orderdetails" ofType="com.bean.Orderdetails">
			<id property="id" column="idd" />
			<result column="ordercount" property="ordercount" />
			<result column="pid" property="pid" />
			<result column="oid" property="oid" />
			<association property="products" javaType="com.bean.Products">
				<id column="idp" property="id" />
				<result column="pname" property="pname" />
				<result column="size" property="size" />
				<result column="productscolor" property="productscolor" />
				<result column="productstype1" property="productstype1" />
				<result column="productstype2" property="productstype2" />
				<result column="price" property="price" />
				<result column="pdescription" property="pdescription" />
				<result column="count" property="count" />
				<result column="tid" property="tid" />
			</association>
		</collection>
	</resultMap>




	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		id, ordertime, orderaddress, uid, orderstatus, payment, remarks,
		money, tell, extended1,
		extended2, extended3, extended4, extended5,
		extended6, extended7, extended8,
		extended9,
		extended10, extended11,
		extended12, extended13, extended14, extended15,
		extended16,
		extended17,
		extended18, extended19, extended20
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.String"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<include refid="Base_Column_List" />
		from orders
		where id = #{id,jdbcType=VARCHAR}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from orders
		where id = #{id,jdbcType=VARCHAR}
	</delete>
	<insert id="insert" parameterType="com.bean.Orders">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into orders (id, ordertime, orderaddress,
		uid, orderstatus,
		payment,
		remarks, money, tell,
		extended1, extended2, extended3,
		extended4, extended5, extended6,
		extended7, extended8, extended9,
		extended10, extended11, extended12,
		extended13, extended14, extended15,
		extended16, extended17, extended18,
		extended19, extended20)
		values
		(#{id,jdbcType=VARCHAR}, #{ordertime,jdbcType=DATE},
		#{orderaddress,jdbcType=VARCHAR},
		#{uid,jdbcType=VARCHAR},
		#{orderstatus,jdbcType=INTEGER}, #{payment,jdbcType=INTEGER},
		#{remarks,jdbcType=VARCHAR}, #{money,jdbcType=DOUBLE},
		#{tell,jdbcType=VARCHAR},
		#{extended1,jdbcType=VARCHAR},
		#{extended2,jdbcType=VARCHAR}, #{extended3,jdbcType=VARCHAR},
		#{extended4,jdbcType=VARCHAR}, #{extended5,jdbcType=VARCHAR},
		#{extended6,jdbcType=VARCHAR},
		#{extended7,jdbcType=VARCHAR},
		#{extended8,jdbcType=VARCHAR}, #{extended9,jdbcType=VARCHAR},
		#{extended10,jdbcType=VARCHAR}, #{extended11,jdbcType=VARCHAR},
		#{extended12,jdbcType=VARCHAR},
		#{extended13,jdbcType=VARCHAR},
		#{extended14,jdbcType=VARCHAR}, #{extended15,jdbcType=VARCHAR},
		#{extended16,jdbcType=VARCHAR}, #{extended17,jdbcType=VARCHAR},
		#{extended18,jdbcType=VARCHAR},
		#{extended19,jdbcType=VARCHAR},
		#{extended20,jdbcType=VARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.bean.Orders">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<selectKey keyProperty="id" resultType="java.lang.String"
			order="BEFORE">
			SELECT uuid()
		</selectKey>
		insert into orders
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="ordertime != null">
				ordertime,
			</if>
			<if test="orderaddress != null">
				orderaddress,
			</if>
			<if test="uid != null">
				uid,
			</if>
			<if test="orderstatus != null">
				orderstatus,
			</if>
			<if test="payment != null">
				payment,
			</if>
			<if test="remarks != null">
				remarks,
			</if>
			<if test="money != null">
				money,
			</if>
			<if test="tell != null">
				tell,
			</if>
			<if test="extended1 != null">
				extended1,
			</if>
			<if test="extended2 != null">
				extended2,
			</if>
			<if test="extended3 != null">
				extended3,
			</if>
			<if test="extended4 != null">
				extended4,
			</if>
			<if test="extended5 != null">
				extended5,
			</if>
			<if test="extended6 != null">
				extended6,
			</if>
			<if test="extended7 != null">
				extended7,
			</if>
			<if test="extended8 != null">
				extended8,
			</if>
			<if test="extended9 != null">
				extended9,
			</if>
			<if test="extended10 != null">
				extended10,
			</if>
			<if test="extended11 != null">
				extended11,
			</if>
			<if test="extended12 != null">
				extended12,
			</if>
			<if test="extended13 != null">
				extended13,
			</if>
			<if test="extended14 != null">
				extended14,
			</if>
			<if test="extended15 != null">
				extended15,
			</if>
			<if test="extended16 != null">
				extended16,
			</if>
			<if test="extended17 != null">
				extended17,
			</if>
			<if test="extended18 != null">
				extended18,
			</if>
			<if test="extended19 != null">
				extended19,
			</if>
			<if test="extended20 != null">
				extended20,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=VARCHAR},
			</if>
			<if test="ordertime != null">
				#{ordertime,jdbcType=DATE},
			</if>
			<if test="orderaddress != null">
				#{orderaddress,jdbcType=VARCHAR},
			</if>
			<if test="uid != null">
				#{uid,jdbcType=VARCHAR},
			</if>
			<if test="orderstatus != null">
				#{orderstatus,jdbcType=INTEGER},
			</if>
			<if test="payment != null">
				#{payment,jdbcType=INTEGER},
			</if>
			<if test="remarks != null">
				#{remarks,jdbcType=VARCHAR},
			</if>
			<if test="money != null">
				#{money,jdbcType=DOUBLE},
			</if>
			<if test="tell != null">
				#{tell,jdbcType=VARCHAR},
			</if>
			<if test="extended1 != null">
				#{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				#{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				#{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				#{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				#{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				#{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				#{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				#{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				#{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				#{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				#{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				#{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				#{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				#{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				#{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				#{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				#{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				#{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				#{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				#{extended20,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.bean.Orders">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update orders
		<set>
			<if test="ordertime != null">
				ordertime = #{ordertime,jdbcType=DATE},
			</if>
			<if test="orderaddress != null">
				orderaddress = #{orderaddress,jdbcType=VARCHAR},
			</if>
			<if test="uid != null">
				uid = #{uid,jdbcType=VARCHAR},
			</if>
			<if test="orderstatus != null">
				orderstatus = #{orderstatus,jdbcType=INTEGER},
			</if>
			<if test="payment != null">
				payment = #{payment,jdbcType=INTEGER},
			</if>
			<if test="remarks != null">
				remarks = #{remarks,jdbcType=VARCHAR},
			</if>
			<if test="money != null">
				money = #{money,jdbcType=DOUBLE},
			</if>
			<if test="tell != null">
				tell = #{tell,jdbcType=VARCHAR},
			</if>
			<if test="extended1 != null">
				extended1 = #{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				extended2 = #{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				extended3 = #{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				extended4 = #{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				extended5 = #{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				extended6 = #{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				extended7 = #{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				extended8 = #{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				extended9 = #{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				extended10 = #{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				extended11 = #{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				extended12 = #{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				extended13 = #{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				extended14 = #{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				extended15 = #{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				extended16 = #{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				extended17 = #{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				extended18 = #{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				extended19 = #{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				extended20 = #{extended20,jdbcType=VARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=VARCHAR}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.bean.Orders">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update orders
		set ordertime = #{ordertime,jdbcType=DATE},
		orderaddress =
		#{orderaddress,jdbcType=VARCHAR},
		uid = #{uid,jdbcType=VARCHAR},
		orderstatus = #{orderstatus,jdbcType=INTEGER},
		payment =
		#{payment,jdbcType=INTEGER},
		remarks = #{remarks,jdbcType=VARCHAR},
		money = #{money,jdbcType=DOUBLE},
		tell = #{tell,jdbcType=VARCHAR},
		extended1 = #{extended1,jdbcType=VARCHAR},
		extended2 =
		#{extended2,jdbcType=VARCHAR},
		extended3 =
		#{extended3,jdbcType=VARCHAR},
		extended4 =
		#{extended4,jdbcType=VARCHAR},
		extended5 =
		#{extended5,jdbcType=VARCHAR},
		extended6 =
		#{extended6,jdbcType=VARCHAR},
		extended7 =
		#{extended7,jdbcType=VARCHAR},
		extended8 =
		#{extended8,jdbcType=VARCHAR},
		extended9 =
		#{extended9,jdbcType=VARCHAR},
		extended10 =
		#{extended10,jdbcType=VARCHAR},
		extended11 =
		#{extended11,jdbcType=VARCHAR},
		extended12 =
		#{extended12,jdbcType=VARCHAR},
		extended13 =
		#{extended13,jdbcType=VARCHAR},
		extended14 =
		#{extended14,jdbcType=VARCHAR},
		extended15 =
		#{extended15,jdbcType=VARCHAR},
		extended16 =
		#{extended16,jdbcType=VARCHAR},
		extended17 =
		#{extended17,jdbcType=VARCHAR},
		extended18 =
		#{extended18,jdbcType=VARCHAR},
		extended19 =
		#{extended19,jdbcType=VARCHAR},
		extended20 =
		#{extended20,jdbcType=VARCHAR}
		where id = #{id,jdbcType=VARCHAR}
	</update>
	<!-- uuid自动生成 -->

	<select id="selectOrders" resultType="com.bean.Orders">
		select * from orders
	</select>

	<select id="selectByorderstatus" parameterType="java.lang.Integer"
		resultType="com.bean.Orders">
		select * from orders where
		orderstatus=#{orderstatus,jdbcType=VARCHAR}
	</select>

	<select id="selectFrontOrderstatus" parameterType="hashMap"
		resultMap="OrdersAndDetailProdout">
		select * from orders o,orderdetails od,products p
		<where>
		<if test="orders.orderstatus!=null"> and o.orderstatus=#{orders.orderstatus}</if>
		<if test="orders.uid!=null"> and o.uid=#{orders.uid}</if>
		and o.id=od.oid and od.pid=p.id
		</where>
		order by ordertime DESC
		limit #{page},#{max}
	</select>
	<!-- where
		o.orderstatus=#{orders.orderstatus}
		and o.uid=#{orders.uid}
		and o.id=od.oid and od.pid=p.id
		order by ordertime DESC limit
		#{page},#{max} -->

	<select id="selectByorderstatusCount" parameterType="hashMap"
		resultType="java.lang.Integer">
		select count(*) from orders o,orderdetails od,products p
		<where>
		<if test="orders.orderstatus!=null"> and o.orderstatus=#{orders.orderstatus}</if>
		<if test="orders.uid!=null"> and o.uid=#{orders.uid}</if>
		and o.id=od.oid and od.pid=p.id
		</where>
	</select>
	
	
	<!-- 查询今年销售总额 -->
	<select id="selectOrdersAllMoneysYear" resultType="java.lang.Double">
		SELECT COALESCE(sum(o.money),0) sumMoney from orders o
		where YEAR(o.ordertime)=YEAR(NOW())
	</select>
	
</mapper>