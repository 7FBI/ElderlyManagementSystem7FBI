<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dao.ProductsMapper">
	<resultMap id="BaseResultMap" type="com.bean.Products">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<constructor>
			<idArg column="id" javaType="java.lang.Integer" jdbcType="INTEGER" />
			<arg column="pname" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="size" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="productscolor" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="productstype1" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="productstype2" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="price" javaType="java.lang.Double" jdbcType="DOUBLE" />
			<arg column="pdescription" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="count" javaType="java.lang.Integer" jdbcType="INTEGER" />
			<arg column="tid" javaType="java.lang.Integer" jdbcType="INTEGER" />
			<arg column="extended1" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended2" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended3" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended4" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended5" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended6" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended7" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended8" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended9" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended10" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended11" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended12" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended13" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended14" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended15" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended16" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended17" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended18" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended19" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="extended20" javaType="java.lang.String" jdbcType="VARCHAR" />
			<arg column="producturl" javaType="java.lang.String" jdbcType="VARCHAR" />
		</constructor>
	</resultMap>
<resultMap type="com.bean.Products" id="ProductUrlByPid">
		<id column="id" property="id" />
		<result column="pname" property="pname" />
		<result column="price" property="price" />
		<result column="pdescription" property="pdescription" />
		<result column="productstype1" property="productstype1" />
		<result column="productstype2" property="productstype2" />
		<result column="size" property="size" />
		<result column="count" property="count" />
		<result column="productscolor" property="productscolor" />
		<collection property="listPhotos" ofType="com.bean.Showsphotos">
			<id column="sp_id" property="id" />
			<result column="sp_url" property="showphotosurl" />
			
		</collection>
	</resultMap>
	<resultMap type="com.bean.Products" id="ProductStatistics">
		<result column="pname" property="pname" />
		<result column="price" property="price" />
		<result column="sumMoney" property="sumMoney" />
		<result column="sumNum" property="sumNum" />
		<collection property="classification" ofType="com.bean.Classification">
			<id column="idc" property="id" />
			<result column="classname" property="classname" />
		</collection>
	</resultMap>

	<resultMap type="com.bean.Products" id="ProductStatisticsThree">
		<result column="pname" property="pname" />
		<result column="sumMoney" property="sumMoney" />
		<result column="sumNum" property="sumNum" />
	</resultMap>

	<resultMap type="com.bean.Products" id="ProductStatisticsTwoNum">
		<result column="pname" property="pname" />
		<result column="sumNum" property="sumNum" />
	</resultMap>

	<resultMap type="com.bean.Products" id="ProductStatisticsTwoMoney">
		<result column="pname" property="pname" />
		<result column="sumMoney" property="sumMoney" />
	</resultMap>

	<!-- ProductStatisticsDateNum -->
	<resultMap type="com.bean.Products" id="ProductStatisticsDateNum">
		<result column="dates" property="dates" />
		<result column="sumNum" property="sumNum" />
	</resultMap>
	<!-- ProductStatisticsDateMoney -->
	<resultMap type="com.bean.Products" id="ProductStatisticsDateMoney">
		<result column="dates" property="dates" />
		<result column="sumMoney" property="sumMoney" />
	</resultMap>

	<!-- ProductStatisticsTypeNumTid -->
	<resultMap type="com.bean.Products" id="ProductStatisticsTypeNumTid">
		<result column="pname" property="pname" />
		<result column="sumNum" property="sumNum" />
		<result column="tid" property="tid" />
	</resultMap>
	
	


	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		id, pname, size, productscolor, productstype1, productstype2, price,
		pdescription,
		count, tid, extended1, extended2, extended3, extended4,
		extended5,
		extended6, extended7,
		extended8, extended9, extended10,
		extended11, extended12, extended13,
		extended14,
		extended15, extended16,
		extended17, extended18, extended19, extended20,
		producturl
	</sql>
	<select id="selectByPrimaryKey" parameterType="java.lang.Integer"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<include refid="Base_Column_List" />
		from products
		where id = #{id,jdbcType=INTEGER}
	</select>

	<!-- 批量查询操作 parameterMap="java.util.List" -->
	<select id="selectProductList" resultType="com.bean.Products">
		select *
		from products where id in
		<foreach collection="list" index="index" item="item" open="("
			separator="," close=")">
			#{item}
		</foreach>
	</select>

	<select id="selectAllProducts" resultType="com.bean.Products">
		select * from products
	</select>
	<select id="selectProductsByTid" resultType="com.bean.Products">
		select * from
		products WHERE tid=1
	</select>
	<select id="selectProductUrlByPid" parameterType="java.lang.Integer"
		resultMap="ProductUrlByPid">
		SELECT p.*,sp.id sp_id,sp.showphotosurl sp_url FROM products
		p,showsphotos
		sp WHERE p.id=sp.product_id AND p.id=#{pid}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from products
		where id = #{id,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.bean.Products">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into products (id, pname, size,
		productscolor, productstype1,
		productstype2,
		price, pdescription, count,
		tid, extended1, extended2,
		extended3, extended4, extended5,
		extended6, extended7, extended8,
		extended9, extended10, extended11,
		extended12, extended13, extended14,
		extended15, extended16, extended17,
		extended18, extended19, extended20,
		producturl)
		values (#{id,jdbcType=INTEGER}, #{pname,jdbcType=VARCHAR},
		#{size,jdbcType=VARCHAR},
		#{productscolor,jdbcType=VARCHAR},
		#{productstype1,jdbcType=VARCHAR}, #{productstype2,jdbcType=VARCHAR},
		#{price,jdbcType=DOUBLE}, #{pdescription,jdbcType=VARCHAR},
		#{count,jdbcType=INTEGER},
		#{tid,jdbcType=INTEGER},
		#{extended1,jdbcType=VARCHAR}, #{extended2,jdbcType=VARCHAR},
		#{extended3,jdbcType=VARCHAR}, #{extended4,jdbcType=VARCHAR},
		#{extended5,jdbcType=VARCHAR},
		#{extended6,jdbcType=VARCHAR},
		#{extended7,jdbcType=VARCHAR}, #{extended8,jdbcType=VARCHAR},
		#{extended9,jdbcType=VARCHAR}, #{extended10,jdbcType=VARCHAR},
		#{extended11,jdbcType=VARCHAR},
		#{extended12,jdbcType=VARCHAR},
		#{extended13,jdbcType=VARCHAR}, #{extended14,jdbcType=VARCHAR},
		#{extended15,jdbcType=VARCHAR}, #{extended16,jdbcType=VARCHAR},
		#{extended17,jdbcType=VARCHAR},
		#{extended18,jdbcType=VARCHAR},
		#{extended19,jdbcType=VARCHAR}, #{extended20,jdbcType=VARCHAR},
		#{producturl,jdbcType=VARCHAR})
	</insert>
	<insert id="insertSelective" parameterType="com.bean.Products">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into products
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="pname != null">
				pname,
			</if>
			<if test="size != null">
				size,
			</if>
			<if test="productscolor != null">
				productscolor,
			</if>
			<if test="productstype1 != null">
				productstype1,
			</if>
			<if test="productstype2 != null">
				productstype2,
			</if>
			<if test="price != null">
				price,
			</if>
			<if test="pdescription != null">
				pdescription,
			</if>
			<if test="count != null">
				count,
			</if>
			<if test="tid != null">
				tid,
			</if>
			<if test="extended1 != null">
				extended1,
			</if>
			<if test="extended2 != null">
				extended2,
			</if>
			<if test="extended3 != null">
				extended3,
			</if>
			<if test="extended4 != null">
				extended4,
			</if>
			<if test="extended5 != null">
				extended5,
			</if>
			<if test="extended6 != null">
				extended6,
			</if>
			<if test="extended7 != null">
				extended7,
			</if>
			<if test="extended8 != null">
				extended8,
			</if>
			<if test="extended9 != null">
				extended9,
			</if>
			<if test="extended10 != null">
				extended10,
			</if>
			<if test="extended11 != null">
				extended11,
			</if>
			<if test="extended12 != null">
				extended12,
			</if>
			<if test="extended13 != null">
				extended13,
			</if>
			<if test="extended14 != null">
				extended14,
			</if>
			<if test="extended15 != null">
				extended15,
			</if>
			<if test="extended16 != null">
				extended16,
			</if>
			<if test="extended17 != null">
				extended17,
			</if>
			<if test="extended18 != null">
				extended18,
			</if>
			<if test="extended19 != null">
				extended19,
			</if>
			<if test="extended20 != null">
				extended20,
			</if>
			<if test="producturl != null">
				producturl,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="pname != null">
				#{pname,jdbcType=VARCHAR},
			</if>
			<if test="size != null">
				#{size,jdbcType=VARCHAR},
			</if>
			<if test="productscolor != null">
				#{productscolor,jdbcType=VARCHAR},
			</if>
			<if test="productstype1 != null">
				#{productstype1,jdbcType=VARCHAR},
			</if>
			<if test="productstype2 != null">
				#{productstype2,jdbcType=VARCHAR},
			</if>
			<if test="price != null">
				#{price,jdbcType=DOUBLE},
			</if>
			<if test="pdescription != null">
				#{pdescription,jdbcType=VARCHAR},
			</if>
			<if test="count != null">
				#{count,jdbcType=INTEGER},
			</if>
			<if test="tid != null">
				#{tid,jdbcType=INTEGER},
			</if>
			<if test="extended1 != null">
				#{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				#{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				#{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				#{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				#{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				#{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				#{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				#{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				#{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				#{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				#{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				#{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				#{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				#{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				#{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				#{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				#{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				#{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				#{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				#{extended20,jdbcType=VARCHAR},
			</if>
			<if test="producturl != null">
				#{producturl,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.bean.Products">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update products
		<set>
			<if test="pname != null">
				pname = #{pname,jdbcType=VARCHAR},
			</if>
			<if test="size != null">
				size = #{size,jdbcType=VARCHAR},
			</if>
			<if test="productscolor != null">
				productscolor = #{productscolor,jdbcType=VARCHAR},
			</if>
			<if test="productstype1 != null">
				productstype1 = #{productstype1,jdbcType=VARCHAR},
			</if>
			<if test="productstype2 != null">
				productstype2 = #{productstype2,jdbcType=VARCHAR},
			</if>
			<if test="price != null">
				price = #{price,jdbcType=DOUBLE},
			</if>
			<if test="pdescription != null">
				pdescription = #{pdescription,jdbcType=VARCHAR},
			</if>
			<if test="count != null">
				count = #{count,jdbcType=INTEGER},
			</if>
			<if test="tid != null">
				tid = #{tid,jdbcType=INTEGER},
			</if>
			<if test="extended1 != null">
				extended1 = #{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				extended2 = #{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				extended3 = #{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				extended4 = #{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				extended5 = #{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				extended6 = #{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				extended7 = #{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				extended8 = #{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				extended9 = #{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				extended10 = #{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				extended11 = #{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				extended12 = #{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				extended13 = #{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				extended14 = #{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				extended15 = #{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				extended16 = #{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				extended17 = #{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				extended18 = #{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				extended19 = #{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				extended20 = #{extended20,jdbcType=VARCHAR},
			</if>
			<if test="producturl != null">
				producturl = #{producturl,jdbcType=VARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.bean.Products">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update products
		set pname = #{pname,jdbcType=VARCHAR},
		size =
		#{size,jdbcType=VARCHAR},
		productscolor =
		#{productscolor,jdbcType=VARCHAR},
		productstype1 =
		#{productstype1,jdbcType=VARCHAR},
		productstype2 =
		#{productstype2,jdbcType=VARCHAR},
		price = #{price,jdbcType=DOUBLE},
		pdescription = #{pdescription,jdbcType=VARCHAR},
		count =
		#{count,jdbcType=INTEGER},
		tid = #{tid,jdbcType=INTEGER},
		extended1 =
		#{extended1,jdbcType=VARCHAR},
		extended2 =
		#{extended2,jdbcType=VARCHAR},
		extended3 =
		#{extended3,jdbcType=VARCHAR},
		extended4 =
		#{extended4,jdbcType=VARCHAR},
		extended5 =
		#{extended5,jdbcType=VARCHAR},
		extended6 =
		#{extended6,jdbcType=VARCHAR},
		extended7 =
		#{extended7,jdbcType=VARCHAR},
		extended8 =
		#{extended8,jdbcType=VARCHAR},
		extended9 =
		#{extended9,jdbcType=VARCHAR},
		extended10 =
		#{extended10,jdbcType=VARCHAR},
		extended11 =
		#{extended11,jdbcType=VARCHAR},
		extended12 =
		#{extended12,jdbcType=VARCHAR},
		extended13 =
		#{extended13,jdbcType=VARCHAR},
		extended14 =
		#{extended14,jdbcType=VARCHAR},
		extended15 =
		#{extended15,jdbcType=VARCHAR},
		extended16 =
		#{extended16,jdbcType=VARCHAR},
		extended17 =
		#{extended17,jdbcType=VARCHAR},
		extended18 =
		#{extended18,jdbcType=VARCHAR},
		extended19 =
		#{extended19,jdbcType=VARCHAR},
		extended20 =
		#{extended20,jdbcType=VARCHAR},
		producturl =
		#{producturl,jdbcType=VARCHAR}
		where id = #{id,jdbcType=INTEGER}
	</update>
	<select id="selectProductsByPage" resultType="com.bean.Products">
		select * from
		products
	</select>


	<!-- 定义商品模糊查询sql片段 -->
	<sql id="query_products_pname">
		<if test="pname!=null">
			products.pname like '%${value}%'
		</if>
	</sql>
	<select id="QueryProductsBypname" parameterType="string"
		resultType="com.bean.Products">
		select * from products
		<!-- <include refid="query_products_pname"></include> -->
		where products.pname like '%${value}%'
	</select>

	<!-- 删除语句 下架商品 -->
	<delete id="deleteProductsByid" parameterType="java.lang.Integer">
		delete from
		products where id=#{value}
	</delete>
	<insert id="insertProductsByselectKey" parameterType="com.bean.Products">
		insert into products(pname,price,count)
		value(#{pname},#{price},#{count})
		<!-- <trim prefix="values (" suffix=")" suffixOverrides=","> <if test="id 
			!= null"> #{id,jdbcType=INTEGER}, </if> <if test="pname != null"> #{pname,jdbcType=VARCHAR}, 
			</if> <if test="size != null"> #{size,jdbcType=VARCHAR}, </if> <if test="productscolor 
			!= null"> #{productscolor,jdbcType=VARCHAR}, </if> <if test="productstype1 
			!= null"> #{productstype1,jdbcType=VARCHAR}, </if> <if test="productstype2 
			!= null"> #{productstype2,jdbcType=VARCHAR}, </if> <if test="price != null"> 
			#{price,jdbcType=DOUBLE}, </if> <if test="pdescription != null"> #{pdescription,jdbcType=VARCHAR}, 
			</if> <if test="count != null"> #{count,jdbcType=INTEGER}, </if> <if test="tid 
			!= null"> #{tid,jdbcType=INTEGER}, </if> <if test="extended1 != null"> #{extended1,jdbcType=VARCHAR}, 
			</if> <if test="extended2 != null"> #{extended2,jdbcType=VARCHAR}, </if> 
			<if test="extended3 != null"> #{extended3,jdbcType=VARCHAR}, </if> <if test="extended4 
			!= null"> #{extended4,jdbcType=VARCHAR}, </if> <if test="extended5 != null"> 
			#{extended5,jdbcType=VARCHAR}, </if> <if test="extended6 != null"> #{extended6,jdbcType=VARCHAR}, 
			</if> <if test="extended7 != null"> #{extended7,jdbcType=VARCHAR}, </if> 
			<if test="extended8 != null"> #{extended8,jdbcType=VARCHAR}, </if> <if test="extended9 
			!= null"> #{extended9,jdbcType=VARCHAR}, </if> <if test="extended10 != null"> 
			#{extended10,jdbcType=VARCHAR}, </if> <if test="extended11 != null"> #{extended11,jdbcType=VARCHAR}, 
			</if> <if test="extended12 != null"> #{extended12,jdbcType=VARCHAR}, </if> 
			<if test="extended13 != null"> #{extended13,jdbcType=VARCHAR}, </if> <if 
			test="extended14 != null"> #{extended14,jdbcType=VARCHAR}, </if> <if test="extended15 
			!= null"> #{extended15,jdbcType=VARCHAR}, </if> <if test="extended16 != null"> 
			#{extended16,jdbcType=VARCHAR}, </if> <if test="extended17 != null"> #{extended17,jdbcType=VARCHAR}, 
			</if> <if test="extended18 != null"> #{extended18,jdbcType=VARCHAR}, </if> 
			<if test="extended19 != null"> #{extended19,jdbcType=VARCHAR}, </if> <if 
			test="extended20 != null"> #{extended20,jdbcType=VARCHAR}, </if> <if test="producturl 
			!= null"> #{producturl,jdbcType=VARCHAR}, </if> </trim> -->
		<selectKey resultType="java.lang.Integer" keyProperty="id"
			order="AFTER">
			SELECT LAST_INSERT_ID()
		</selectKey>
	</insert>
	<select id="selectId" resultType="java.lang.Integer">
		SELECT LAST_INSERT_ID()
	</select>
	<select id="getProductsCount" resultType="long">
		select count(*) from
		products
	</select>

	<resultMap id="invatition" type="com.bean.Products">
		<id column="id" property="id"></id>
		<result column="pname" property="pname"></result>
		<result column="size" property="size"></result>
		<result column="productscolor" property="productscolor"></result>
		<result column="productstype1" property="productstype1"></result>
		<result column="productstype2" property="productstype2"></result>
		<result column="price" property="price"></result>
		<result column="pdescription" property="pdescription"></result>
		<result column="count" property="count"></result>
		<result column="tid" property="tid"></result>
		<result column="extended1" property="extended1"></result>
		<result column="extended2" property="extended2"></result>
		<result column="extended3" property="extended3"></result>
		<result column="extended4" property="extended4"></result>
		<result column="extended5" property="extended5"></result>
		<result column="extended6" property="extended6"></result>
		<result column="extended7" property="extended7"></result>
		<result column="extended8" property="extended8"></result>
		<result column="extended9" property="extended9"></result>
		<result column="extended10" property="extended10"></result>
		<result column="extended11" property="extended11"></result>
		<result column="extended12" property="extended12"></result>
		<result column="extended13" property="extended13"></result>
		<result column="extended14" property="extended14"></result>
		<result column="extended15" property="extended15"></result>
		<result column="extended16" property="extended16"></result>
		<result column="extended17" property="extended17"></result>
		<result column="extended18" property="extended18"></result>
		<result column="extended19" property="extended19"></result>
		<result column="extended20" property="extended20"></result>
		<result column="producturl" property="producturl"></result>
	</resultMap>
	<select id="fenye" parameterType="com.bean.Page" resultMap="invatition">
		select * from products limit #{startRow},#{pageSize}
	</select>

	<select id="searchTotalCount" parameterType="com.bean.Page"
		resultType="java.lang.Integer">     <!-- //模糊查询描述sql -->
		select count(id) from products
		<where>
			<if test="queryCondition!=null">
				and pdescription like count{'%',#{queryCondition},'%'}
			</if>
		</where>
	</select>

	<select id="getInvBycondtion" parameterType="com.bean.Page"
		resultMap="invatition">  <!--模糊查询用户名 -->
		select * from products
		<where>
			<if test="queryCondition!=null">
				pname like CONCAT('%',#{queryCondition},'%')
			</if>
		</where>
	</select>

	<delete id="deleteInvition" parameterType="java.lang.Integer">
		delete from products
		where
		id=#{id}
	</delete>
	<!-- 以下罗双专属 -->
	<resultMap type="Products" id="productsAndClassification">
		<id property="id" column="id" />
		<result property="pname" column="pname" />
		<result property="price" column="price" />
		<result property="pdescription" column="pdescription" />
		<result property="count" column="count" />
		<result property="producturl" column="producturl" />
		<result property="pattern1" column="pattern1" />
		<result property="pattern2" column="pattern2" />
		<result property="pattern3" column="pattern3" />
		<result property="pattern4" column="pattern4" />
		<result property="pattern5" column="pattern5" />
		<association property="classifications" javaType="Classification">
			<id property="id" column="cid" />
			<result property="classname" column="classname" />
		</association>
	</resultMap>
	<!--商品根据商品名模糊查询 -->
	<select id="selectProductsByLikeName" parameterType="java.lang.String"
		resultType="Products">
		select * from products where pname like '%${value}%' 
	</select>
	
	
	<!--商品根据商品类型模糊查询 -->
	<select id="selectProductsByLikeTypeName" parameterType="java.lang.String"
		resultType="Products">
		select * from products,classification where products.tid = classification.id and classname like '%${value}%'
	</select>
	
	<!-- 根据商品类型查询商品 -->
	<select id="selectAllProductsByType" parameterType="java.lang.Integer"
		resultType="Products">
		select * from products where tid = #{tid}

	</select>

	<select id="selectProductDetailByPrimaryKey" parameterType="java.lang.Integer"
		resultMap="productsAndClassification">
		select p.*,c.id cid,c.classname classname from products
		p,classification c
		where p.tid = c.id and p.id = #{id}
	</select>
	<!-- 根据商品匹配疾病 -->
	<select id="selectOldDiseaselibraryByProducts" parameterType="java.lang.Integer"
		resultType="OldDiseaselibrary">
		SELECT diseasename,description,alias FROM
		old_diseaselibrary odl,products
		p,matchdisease md WHERE p.id = md.pid
		AND md.did = odl.id AND pid =
		#{pid}

	</select>
	
	
	<select id="selectProductsByTypeAndLikeName" parameterType="Map"
		resultType="Products">
	select p.*,c.* from products p,classification c where p.tid=c.id and p.pname like '%${pname}%' and c.classname=#{classname}		
	</select>
	<!-- 以上罗双专属 -->





	<!-- 打折商品展示，使用了扩展类productCustom -->
	<select id="productDiscount" resultType="productCustom">
		select
		p.*,d.discountprice discountprice,d.discountstoptime discountstoptime
		from products p,discount d
		where p.id = d.pid and TO_DAYS(discountstoptime)>=TO_DAYS(now())
	</select>

	<!-- 统计不同类型商品的销售量 -->
	<select id="productTypeSumCount" resultMap="ProductStatistics">
		SELECT
		c.classname,SUM(o.ordercount) sumNum FROM orders ord,products p,
		classification c,orderdetails o
		where p.tid=c.id and p.id=o.pid and
		ord.id=o.oid
		GROUP BY p.tid ORDER BY sumNum desc
	</select>

	<!-- 收藏排名前xx名 -->
	<select id="productCollectionOne" resultMap="ProductStatisticsTwoNum"
		parameterType="hashMap">
		SELECT COALESCE(count(oc.pid),0)
		sumNum,p.pname from
		products
		p,oldcollection oc
		where oc.pid=p.id GROUP
		BY oc.pid ORDER BY
		sumNum
		LIMIT 0,#{max}
	</select>
	<!-- 销量排名前xx名 -->
	<select id="productSalesOne" resultMap="ProductStatisticsTwoNum"
		parameterType="hashMap">
		SELECT
		COALESCE(sum(od.ordercount),0) sumNum,p.pname from
		products
		p,orderdetails od
		where od.pid=p.id GROUP BY od.pid ORDER BY
		sumNum
		LIMIT 0,#{max}
	</select>

	<!-- 本季团购商品的销售额 -->
	<select id="productSeasonGroupbuy" resultMap="ProductStatisticsThree"
		parameterType="hashMap">
		SELECT COALESCE(p.price * g.groupprice *
		od.ordercount,0) sumMoney , od.ordercount
		sumNum , p.pname FROM
		groupbuying g , orderdetails od , products p ,
		orders o WHERE
		od.pid=g.pid and p.id=g.pid and od.oid=o.id AND QUARTER (
		o.ordertime )
		=QUARTER(NOW()) GROUP BY g.pid ORDER BY sumMoney
	</select>

	<!-- 本季没有团购和打折的商品销售量 -->
	<select id="productSeasonNot" resultMap="ProductStatisticsThree"
		parameterType="hashMap">
		SELECT COALESCE(sum(DISTINCT od.ordercount),0)
		sumNum,COALESCE(SUM(DISTINCT
		od.ordercount*p.price),0) sumMoney,p.pname
		from products p,orders o,orderdetails od,groupbuying g,discount d
		WHERE p.id!=d.pid AND p.id!=g.pid and p.id=od.pid and o.id=od.oid and
		QUARTER(o.ordertime)=QUARTER(NOW()) GROUP BY p.id ORDER BY sumMoney
	</select>

	<!-- 本季打折的商品销售量 -->
	<select id="productSeasonDiscount" resultMap="ProductStatisticsThree"
		parameterType="hashMap">
		SELECT COALESCE(sum(od.ordercount),0)
		sumNum,COALESCE(SUM(DISTINCT
		od.ordercount*p.price),0) sumMoney,p.pname
		from products p,orders o,orderdetails od,discount d
		WHERE p.id=d.pid
		AND p.id=od.pid and o.id=od.oid and
		QUARTER(o.ordertime)=QUARTER(NOW()) GROUP BY p.id ORDER BY sumMoney
	</select>

	<select id="productByidDateFormat" resultMap="ProductStatisticsDateNum"
		parameterType="java.lang.Integer">
		SELECT COALESCE(SUM(od.ordercount),0)
		sumNum,DATE_FORMAT(o.ordertime,'%Y-%m-%d') dates
		from orderdetails od,
		products p,orders o
		where p.id=od.pid AND o.id=od.oid AND p.id=#{id}
		GROUP BY
		DATE_FORMAT(o.ordertime,'%Y-%m')
	</select>
	<!-- 分类查询本周销售量 -->
	<select id="productTypeGroupByWeek" resultMap="ProductStatisticsTwoNum">
		SELECT
		COALESCE(SUM(DISTINCT od.ordercount),0) sumNum,c.classname
		pname
		FROM
		products p,orderdetails od,orders o,classification c
		WHERE
		p.id=od.pid
		and o.id=od.oid and c.id=p.tid and
		YEARWEEK(o.ordertime) =
		YEARWEEK(now()) GROUP BY p.tid
	</select>
	<!-- 分类查询本季详细销售量 -->
	<select id="productTypeGroupByQuarter" resultMap="ProductStatisticsTypeNumTid">
		SELECT
		COALESCE(SUM(DISTINCT od.ordercount),0)
		sumNum,c.classname pname,p.tid
		FROM products
		p,orderdetails od,orders o,classification c
		WHERE
		p.id=od.pid and
		o.id=od.oid and p.tid=c.id and QUARTER(o.ordertime) =
		QUARTER(now()) GROUP
		BY p.tid ORDER BY sumNum
	</select>
<!--商品销售量 -->
	<select id="querySaleProductCountByTid" parameterType="java.lang.Integer" resultType="com.bean.Products">
		
		SELECT products.id, products.pname
		,products.price,products.producturl,SUM(ordercount) saleProductCount
		FROM orderdetails,orders,products
		WHERE
		orderdetails.pid=products.id
		AND
		orderdetails.oid=orders.id
		AND products.tid=#{tid,jdbcType=INTEGER}
		GROUP BY pid ORDER BY SUM(ordercount) DESC
		LIMIT 10 
	</select>
	<!-- -->
	<select id="querySomeProductByTid" parameterType="java.lang.Integer" resultType="com.bean.Products">
		
		SELECT DISTINCT id,products.*
		FROM products
		WHERE
		products.tid=#{tid,jdbcType=INTEGER}
		ORDER BY RAND() LIMIT 6
	</select>
	
	<select id="productTypeTidByQuarter" resultMap="ProductStatisticsTypeNumTid" parameterType="java.lang.Integer">
		SELECT COALESCE(SUM(DISTINCT od.ordercount),0)
		sumNum,DATE_FORMAT(o.ordertime,'%Y-%m-%d') datesDay FROM products
		p,orderdetails od,orders o,classification c
		WHERE p.id=od.pid and o.id=od.oid and p.tid=#{tid} and QUARTER(o.ordertime) =
		QUARTER(now()) GROUP BY DATE_FORMAT(o.ordertime,'%Y-%m-%d')
	</select>
  <!-- 团购商品推荐 -->
  <select id="selectRecommend" parameterType="java.lang.Integer" resultType="com.bean.Products">
      SELECT * from products where tid=#{tid,jdbcType=INTEGER} LIMIT 3
  </select>
  <!-- 商品详情页面猜你喜欢 -->
 <select id="selectrcai" parameterType="java.lang.Integer" resultType="com.bean.Products">
  select * from products where tid=#{tid,jdbcType=INTEGER} LIMIT 5
 </select>
 <!-- 后台团购查询商品 商品名称 -->
 <select id="selectBypnameui" parameterType="java.lang.String" resultType="com.bean.Products">
 select * from products where pname=#{pname,jdbcType=VARCHAR}
 </select>
 <select id="selectByitoBackstage" parameterType="java.lang.Integer" resultType="com.bean.Products">
  select * from products where id=#{id,jdbcType=INTEGER}
 </select>
</mapper>