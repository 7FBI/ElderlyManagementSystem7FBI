<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dao.WatchhistoryMapper">
	<!--观看记录  -->
	<resultMap type="com.bean.Watchhistory" id="favoriteVideo">
	   <id column="wtachid" property="id"/>
	   <result column="videoid" property="videoid"/>
	   <association property="video" javaType="com.bean.Video">
	        <id column="id" property="id"/>
	        <result column="vtitle" property="vtitle"/>
	        <result column="vteacher" property="vteacher"/>
	        <result column="vprice" property="vprice"/>
	        <result column="vcontent" property="vcontent"/>
	        <result column="vurl" property="vurl"/>
	    </association>
	</resultMap>
	<resultMap id="BaseResultMap" type="com.bean.Watchhistory">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		<constructor>
			<idArg column="id" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="videoId" jdbcType="INTEGER" javaType="java.lang.Integer" />
			<arg column="uid" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="firstwatchtime" jdbcType="DATE" javaType="java.util.Date" />
			<arg column="extended1" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended2" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended3" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended4" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended5" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended6" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended7" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended8" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended9" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended10" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended11" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended12" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended13" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended14" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended15" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended16" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended17" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended18" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended19" jdbcType="VARCHAR" javaType="java.lang.String" />
			<arg column="extended20" jdbcType="VARCHAR" javaType="java.lang.String" />
		</constructor>
	</resultMap>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		id, videoId, uid, firstwatchtime, extended1, extended2, extended3,
		extended4, extended5,
		extended6, extended7, extended8, extended9,
		extended10, extended11, extended12,
		extended13,
		extended14, extended15,
		extended16, extended17, extended18, extended19,
		extended20
	</sql>
	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		select
		<include refid="Base_Column_List" />
		from watchhistory
		where id = #{id,jdbcType=INTEGER}
	</select>
	<!-- -->
	<select id="myWatched" parameterType="java.lang.String" resultMap="favoriteVideo">
		
		SELECT video.id id,video.vtitle vtitle,video.vteacher vteacher,
		video.vprice vprice,video.vcontent vcontent,video.vurl vurl,
		watchhistory.videoid videoid,watchhistory.id wtachid
		FROM video,watchhistory
		WHERE video.id=watchhistory.videoid AND watchhistory.uid=#{userUid,jdbcType=VARCHAR}
	</select>
	<!--查询是否有观看记录 -->
	<select id="whetherSeen" parameterType="hashMap" resultType="com.bean.Watchhistory">
		select * from watchhistory
		<where>
			<if test="videoId !=null">
				videoId=#{videoId}
			</if>
			<if test="userUid !=null">
				and uid=#{userUid}
			</if>
		</where>
	</select>
	<!--添加观看记录 -->
	<insert id="addSeenHistory" parameterType="com.bean.Watchhistory">
		insert into watchhistory
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="videoid != null">
				videoId,
			</if>
			<if test="uid != null">
				uid,
			</if>
			<if test="firstwatchtime != null">
				firstwatchtime,
			</if>
			<if test="extended1 != null">
				extended1,
			</if>
			<if test="extended2 != null">
				extended2,
			</if>
			<if test="extended3 != null">
				extended3,
			</if>
			<if test="extended4 != null">
				extended4,
			</if>
			<if test="extended5 != null">
				extended5,
			</if>
			<if test="extended6 != null">
				extended6,
			</if>
			<if test="extended7 != null">
				extended7,
			</if>
			<if test="extended8 != null">
				extended8,
			</if>
			<if test="extended9 != null">
				extended9,
			</if>
			<if test="extended10 != null">
				extended10,
			</if>
			<if test="extended11 != null">
				extended11,
			</if>
			<if test="extended12 != null">
				extended12,
			</if>
			<if test="extended13 != null">
				extended13,
			</if>
			<if test="extended14 != null">
				extended14,
			</if>
			<if test="extended15 != null">
				extended15,
			</if>
			<if test="extended16 != null">
				extended16,
			</if>
			<if test="extended17 != null">
				extended17,
			</if>
			<if test="extended18 != null">
				extended18,
			</if>
			<if test="extended19 != null">
				extended19,
			</if>
			<if test="extended20 != null">
				extended20,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="videoid != null">
				#{videoid,jdbcType=INTEGER},
			</if>
			<if test="uid != null">
				#{uid,jdbcType=VARCHAR},
			</if>
			<if test="firstwatchtime != null">
				#{firstwatchtime,jdbcType=DATE},
			</if>
			<if test="extended1 != null">
				#{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				#{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				#{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				#{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				#{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				#{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				#{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				#{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				#{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				#{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				#{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				#{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				#{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				#{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				#{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				#{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				#{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				#{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				#{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				#{extended20,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>

	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		delete from watchhistory
		where id = #{id,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.bean.Watchhistory">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into watchhistory (id, videoId, uid,
		firstwatchtime, extended1,
		extended2,
		extended3, extended4, extended5,
		extended6, extended7,
		extended8,
		extended9, extended10, extended11,
		extended12, extended13,
		extended14,
		extended15, extended16, extended17,
		extended18, extended19,
		extended20
		)
		values (#{id,jdbcType=INTEGER},
		#{videoid,jdbcType=INTEGER},
		#{uid,jdbcType=VARCHAR},
		#{firstwatchtime,jdbcType=DATE}, #{extended1,jdbcType=VARCHAR},
		#{extended2,jdbcType=VARCHAR},
		#{extended3,jdbcType=VARCHAR},
		#{extended4,jdbcType=VARCHAR},
		#{extended5,jdbcType=VARCHAR},
		#{extended6,jdbcType=VARCHAR}, #{extended7,jdbcType=VARCHAR},
		#{extended8,jdbcType=VARCHAR},
		#{extended9,jdbcType=VARCHAR},
		#{extended10,jdbcType=VARCHAR},
		#{extended11,jdbcType=VARCHAR},
		#{extended12,jdbcType=VARCHAR}, #{extended13,jdbcType=VARCHAR},
		#{extended14,jdbcType=VARCHAR},
		#{extended15,jdbcType=VARCHAR},
		#{extended16,jdbcType=VARCHAR},
		#{extended17,jdbcType=VARCHAR},
		#{extended18,jdbcType=VARCHAR}, #{extended19,jdbcType=VARCHAR},
		#{extended20,jdbcType=VARCHAR}
		)
	</insert>
	<insert id="insertSelective" parameterType="com.bean.Watchhistory">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		insert into watchhistory
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="id != null">
				id,
			</if>
			<if test="videoid != null">
				videoId,
			</if>
			<if test="uid != null">
				uid,
			</if>
			<if test="firstwatchtime != null">
				firstwatchtime,
			</if>
			<if test="extended1 != null">
				extended1,
			</if>
			<if test="extended2 != null">
				extended2,
			</if>
			<if test="extended3 != null">
				extended3,
			</if>
			<if test="extended4 != null">
				extended4,
			</if>
			<if test="extended5 != null">
				extended5,
			</if>
			<if test="extended6 != null">
				extended6,
			</if>
			<if test="extended7 != null">
				extended7,
			</if>
			<if test="extended8 != null">
				extended8,
			</if>
			<if test="extended9 != null">
				extended9,
			</if>
			<if test="extended10 != null">
				extended10,
			</if>
			<if test="extended11 != null">
				extended11,
			</if>
			<if test="extended12 != null">
				extended12,
			</if>
			<if test="extended13 != null">
				extended13,
			</if>
			<if test="extended14 != null">
				extended14,
			</if>
			<if test="extended15 != null">
				extended15,
			</if>
			<if test="extended16 != null">
				extended16,
			</if>
			<if test="extended17 != null">
				extended17,
			</if>
			<if test="extended18 != null">
				extended18,
			</if>
			<if test="extended19 != null">
				extended19,
			</if>
			<if test="extended20 != null">
				extended20,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="id != null">
				#{id,jdbcType=INTEGER},
			</if>
			<if test="videoid != null">
				#{videoid,jdbcType=INTEGER},
			</if>
			<if test="uid != null">
				#{uid,jdbcType=VARCHAR},
			</if>
			<if test="firstwatchtime != null">
				#{firstwatchtime,jdbcType=DATE},
			</if>
			<if test="extended1 != null">
				#{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				#{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				#{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				#{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				#{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				#{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				#{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				#{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				#{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				#{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				#{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				#{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				#{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				#{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				#{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				#{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				#{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				#{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				#{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				#{extended20,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>
	<update id="updateByPrimaryKeySelective" parameterType="com.bean.Watchhistory">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update watchhistory
		<set>
			<if test="videoid != null">
				videoId = #{videoid,jdbcType=INTEGER},
			</if>
			<if test="uid != null">
				uid = #{uid,jdbcType=VARCHAR},
			</if>
			<if test="firstwatchtime != null">
				firstwatchtime = #{firstwatchtime,jdbcType=DATE},
			</if>
			<if test="extended1 != null">
				extended1 = #{extended1,jdbcType=VARCHAR},
			</if>
			<if test="extended2 != null">
				extended2 = #{extended2,jdbcType=VARCHAR},
			</if>
			<if test="extended3 != null">
				extended3 = #{extended3,jdbcType=VARCHAR},
			</if>
			<if test="extended4 != null">
				extended4 = #{extended4,jdbcType=VARCHAR},
			</if>
			<if test="extended5 != null">
				extended5 = #{extended5,jdbcType=VARCHAR},
			</if>
			<if test="extended6 != null">
				extended6 = #{extended6,jdbcType=VARCHAR},
			</if>
			<if test="extended7 != null">
				extended7 = #{extended7,jdbcType=VARCHAR},
			</if>
			<if test="extended8 != null">
				extended8 = #{extended8,jdbcType=VARCHAR},
			</if>
			<if test="extended9 != null">
				extended9 = #{extended9,jdbcType=VARCHAR},
			</if>
			<if test="extended10 != null">
				extended10 = #{extended10,jdbcType=VARCHAR},
			</if>
			<if test="extended11 != null">
				extended11 = #{extended11,jdbcType=VARCHAR},
			</if>
			<if test="extended12 != null">
				extended12 = #{extended12,jdbcType=VARCHAR},
			</if>
			<if test="extended13 != null">
				extended13 = #{extended13,jdbcType=VARCHAR},
			</if>
			<if test="extended14 != null">
				extended14 = #{extended14,jdbcType=VARCHAR},
			</if>
			<if test="extended15 != null">
				extended15 = #{extended15,jdbcType=VARCHAR},
			</if>
			<if test="extended16 != null">
				extended16 = #{extended16,jdbcType=VARCHAR},
			</if>
			<if test="extended17 != null">
				extended17 = #{extended17,jdbcType=VARCHAR},
			</if>
			<if test="extended18 != null">
				extended18 = #{extended18,jdbcType=VARCHAR},
			</if>
			<if test="extended19 != null">
				extended19 = #{extended19,jdbcType=VARCHAR},
			</if>
			<if test="extended20 != null">
				extended20 = #{extended20,jdbcType=VARCHAR},
			</if>
		</set>
		where id = #{id,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.bean.Watchhistory">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. -->
		update watchhistory
		set videoId = #{videoid,jdbcType=INTEGER},
		uid =
		#{uid,jdbcType=VARCHAR},
		firstwatchtime =
		#{firstwatchtime,jdbcType=DATE},
		extended1 =
		#{extended1,jdbcType=VARCHAR},
		extended2 =
		#{extended2,jdbcType=VARCHAR},
		extended3 =
		#{extended3,jdbcType=VARCHAR},
		extended4 =
		#{extended4,jdbcType=VARCHAR},
		extended5 =
		#{extended5,jdbcType=VARCHAR},
		extended6 =
		#{extended6,jdbcType=VARCHAR},
		extended7 =
		#{extended7,jdbcType=VARCHAR},
		extended8 =
		#{extended8,jdbcType=VARCHAR},
		extended9 =
		#{extended9,jdbcType=VARCHAR},
		extended10 =
		#{extended10,jdbcType=VARCHAR},
		extended11 =
		#{extended11,jdbcType=VARCHAR},
		extended12 =
		#{extended12,jdbcType=VARCHAR},
		extended13 =
		#{extended13,jdbcType=VARCHAR},
		extended14 =
		#{extended14,jdbcType=VARCHAR},
		extended15 =
		#{extended15,jdbcType=VARCHAR},
		extended16 =
		#{extended16,jdbcType=VARCHAR},
		extended17 =
		#{extended17,jdbcType=VARCHAR},
		extended18 =
		#{extended18,jdbcType=VARCHAR},
		extended19 =
		#{extended19,jdbcType=VARCHAR},
		extended20 =
		#{extended20,jdbcType=VARCHAR}
		where id = #{id,jdbcType=INTEGER}
	</update>
</mapper>